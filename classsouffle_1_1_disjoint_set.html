<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>souffle: souffle::DisjointSet Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">souffle
   &#160;<span id="projectnumber">1.2.0-360-gecb9d25</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesouffle.html">souffle</a></li><li class="navelem"><a class="el" href="classsouffle_1_1_disjoint_set.html">DisjointSet</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">souffle::DisjointSet Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Structure that emulates a Disjoint Set, i.e.  
 <a href="classsouffle_1_1_disjoint_set.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_union_find_8h_source.html">UnionFind.h</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for souffle::DisjointSet:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set__coll__graph.png" border="0" usemap="#souffle_1_1_disjoint_set_coll__map" alt="Collaboration graph"/></div>
<map name="souffle_1_1_disjoint_set_coll__map" id="souffle_1_1_disjoint_set_coll__map">
<area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html" title="{souffle::shared_mutex\n||+ lock()\l+ lock_shared()\l+ shared_mutex()\l+ try_lock()\l+ try_lock_shared()\l+ unlock()\l+ unlock_shared()\l}" alt="" coords="178,221,328,387"/><area shape="rect" id="node8" href="classsouffle_1_1concurrent__list.html" title="{souffle::concurrent\l_list\&lt; std::atomic\&lt;\l block_t \&gt; * \&gt;\n||+ at()\l+ clear()\l+ concurrent_list()\l+ concurrent_list()\l+ operator=()\l+ operator[]()\l+ push_back()\l+ size()\l+ ~concurrent_list()\l}" alt="" coords="457,192,591,416"/><area shape="rect" id="node7" href="classsouffle_1_1_block_list.html" title="{souffle::BlockList\l\&lt; std::atomic\&lt; block_t \&gt; \&gt;\n||+ add()\l+ begin()\l+ BlockList()\l+ BlockList()\l+ BlockList()\l+ clear()\l+ end()\l+ get()\l+ niptuck()\l+ operator=()\l+ pop()\l+ size()\l+ ~BlockList()\l}" alt="" coords="435,481,612,749"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">iterator stuff  <a href="classsouffle_1_1_disjoint_set_1_1iterator.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af64df2bdb9592f3ead35d9ebdbfd131e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#af64df2bdb9592f3ead35d9ebdbfd131e">begin</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> rep)</td></tr>
<tr class="separator:af64df2bdb9592f3ead35d9ebdbfd131e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e676c57de1fcb9b7b70ca0c38387388"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a6e676c57de1fcb9b7b70ca0c38387388">beginReps</a> ()</td></tr>
<tr class="separator:a6e676c57de1fcb9b7b70ca0c38387388"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f1cc3ae1037b261ea9fae7dc7c307d0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a1f1cc3ae1037b261ea9fae7dc7c307d0">clear</a> ()</td></tr>
<tr class="memdesc:a1f1cc3ae1037b261ea9fae7dc7c307d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clears the <a class="el" href="classsouffle_1_1_disjoint_set.html" title="Structure that emulates a Disjoint Set, i.e. ">DisjointSet</a> of all nodes Invalidates all iterators.  <a href="#a1f1cc3ae1037b261ea9fae7dc7c307d0">More...</a><br/></td></tr>
<tr class="separator:a1f1cc3ae1037b261ea9fae7dc7c307d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33727b0ab2cf3935fc115d15c951004e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a33727b0ab2cf3935fc115d15c951004e">DisjointSet</a> ()</td></tr>
<tr class="separator:a33727b0ab2cf3935fc115d15c951004e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5ace3cf5563f7163312657c3511c8fb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#af5ace3cf5563f7163312657c3511c8fb">end</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> rep)</td></tr>
<tr class="separator:af5ace3cf5563f7163312657c3511c8fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9e22917b7347408782da36c5b484a1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ad9e22917b7347408782da36c5b484a1c">endReps</a> ()</td></tr>
<tr class="separator:ad9e22917b7347408782da36c5b484a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ce1c705c01700abfa661adb33fbd049"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049">findAll</a> ()</td></tr>
<tr class="memdesc:a2ce1c705c01700abfa661adb33fbd049"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a find operation on every node s.t.  <a href="#a2ce1c705c01700abfa661adb33fbd049">More...</a><br/></td></tr>
<tr class="separator:a2ce1c705c01700abfa661adb33fbd049"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a732a188aa3cf418c758503f9dee3f55c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> x, bool isStrong=true)</td></tr>
<tr class="memdesc:a732a188aa3cf418c758503f9dee3f55c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equivalent to the find() function in union/find Find the highest ancestor of the provided node - flattening as we go.  <a href="#a732a188aa3cf418c758503f9dee3f55c">More...</a><br/></td></tr>
<tr class="separator:a732a188aa3cf418c758503f9dee3f55c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a029aecfdfd76964bb35b44a36f68b495"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">genMap</a> ()</td></tr>
<tr class="memdesc:a029aecfdfd76964bb35b44a36f68b495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the representatives Values are the representative's children.  <a href="#a029aecfdfd76964bb35b44a36f68b495">More...</a><br/></td></tr>
<tr class="separator:a029aecfdfd76964bb35b44a36f68b495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e63b6218923a44e34d6333c4a8d2db9"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a7e63b6218923a44e34d6333c4a8d2db9">get</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> <a class="el" href="_synthesiser_8cpp.html#a67a32e5d40efd8e6086e8036d82970da">node</a>) const </td></tr>
<tr class="memdesc:a7e63b6218923a44e34d6333c4a8d2db9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield reference to the node by its node index.  <a href="#a7e63b6218923a44e34d6333c4a8d2db9">More...</a><br/></td></tr>
<tr class="separator:a7e63b6218923a44e34d6333c4a8d2db9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeffaec2f3fc61d5ad016407edbb03d77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#aeffaec2f3fc61d5ad016407edbb03d77">makeNode</a> ()</td></tr>
<tr class="memdesc:aeffaec2f3fc61d5ad016407edbb03d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a node with its parent as itself, rank 0.  <a href="#aeffaec2f3fc61d5ad016407edbb03d77">More...</a><br/></td></tr>
<tr class="separator:aeffaec2f3fc61d5ad016407edbb03d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9c5db24865c284099c61c8aafc2156e5"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a9c5db24865c284099c61c8aafc2156e5">numInSet</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> rep)</td></tr>
<tr class="separator:a9c5db24865c284099c61c8aafc2156e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62f75e12bcc11d502b5ab8613718ca6e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_disjoint_set.html">DisjointSet</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a62f75e12bcc11d502b5ab8613718ca6e">operator=</a> (const <a class="el" href="classsouffle_1_1_disjoint_set.html">DisjointSet</a> &amp;old)</td></tr>
<tr class="separator:a62f75e12bcc11d502b5ab8613718ca6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4ebf17871df26784803b7177145a02c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#af4ebf17871df26784803b7177145a02c">readOnlyFindNode</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> x) const </td></tr>
<tr class="memdesc:af4ebf17871df26784803b7177145a02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read only version of findNode i.e.  <a href="#af4ebf17871df26784803b7177145a02c">More...</a><br/></td></tr>
<tr class="separator:af4ebf17871df26784803b7177145a02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb14c55059807b69f2d8a3c50702c54f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#abb14c55059807b69f2d8a3c50702c54f">sameSet</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> x, <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> y)</td></tr>
<tr class="memdesc:abb14c55059807b69f2d8a3c50702c54f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether the two indices are in the same set.  <a href="#abb14c55059807b69f2d8a3c50702c54f">More...</a><br/></td></tr>
<tr class="separator:abb14c55059807b69f2d8a3c50702c54f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab10aa0ba87a2a6a4f1ad402597167621"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621">size</a> () const </td></tr>
<tr class="separator:ab10aa0ba87a2a6a4f1ad402597167621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218c578b1a2d3c9c81f3d8bb08ee465a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a218c578b1a2d3c9c81f3d8bb08ee465a">staleList</a> () const </td></tr>
<tr class="separator:a218c578b1a2d3c9c81f3d8bb08ee465a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59367ae2fc74565c222838f6e3c69a7e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a59367ae2fc74565c222838f6e3c69a7e">staleMap</a> () const </td></tr>
<tr class="separator:a59367ae2fc74565c222838f6e3c69a7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a708d264ee2f9ec6bf7ed995af20a062c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a708d264ee2f9ec6bf7ed995af20a062c">unionNodes</a> (<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> x, <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> y)</td></tr>
<tr class="memdesc:a708d264ee2f9ec6bf7ed995af20a062c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Union the two specified index nodes.  <a href="#a708d264ee2f9ec6bf7ed995af20a062c">More...</a><br/></td></tr>
<tr class="separator:a708d264ee2f9ec6bf7ed995af20a062c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a72c6d822d03f4f5c29b7a487e0ad6858"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a> (const <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> inblock)</td></tr>
<tr class="memdesc:a72c6d822d03f4f5c29b7a487e0ad6858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ï Extract parent from block.  <a href="#a72c6d822d03f4f5c29b7a487e0ad6858">More...</a><br/></td></tr>
<tr class="separator:a72c6d822d03f4f5c29b7a487e0ad6858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2537a5caf8cbb4ac1461528479558abd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">b2r</a> (const <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> inblock)</td></tr>
<tr class="memdesc:a2537a5caf8cbb4ac1461528479558abd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Extract rank from block.  <a href="#a2537a5caf8cbb4ac1461528479558abd">More...</a><br/></td></tr>
<tr class="separator:a2537a5caf8cbb4ac1461528479558abd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae892a7febe8076794433d5546a9a3b94"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">pr2b</a> (const <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> parent, const <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> rank)</td></tr>
<tr class="memdesc:ae892a7febe8076794433d5546a9a3b94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield a block given parent and rank.  <a href="#ae892a7febe8076794433d5546a9a3b94">More...</a><br/></td></tr>
<tr class="separator:ae892a7febe8076794433d5546a9a3b94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:af1a0911ad685d6580d60f968e36a5b4b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#af1a0911ad685d6580d60f968e36a5b4b">updateRoot</a> (const <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> x, const <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> oldrank, const <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> y, const <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> newrank, bool isStrong)</td></tr>
<tr class="memdesc:af1a0911ad685d6580d60f968e36a5b4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the root of the tree of which x is, to have y as the base instead.  <a href="#af1a0911ad685d6580d60f968e36a5b4b">More...</a><br/></td></tr>
<tr class="separator:af1a0911ad685d6580d60f968e36a5b4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae9da5a949e2d97db9c284cecd8f6eb3c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1_block_list.html">BlockList</a>&lt; std::atomic&lt; <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a></td></tr>
<tr class="separator:ae9da5a949e2d97db9c284cecd8f6eb3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11702dfa53bf9e68329fe53c28e0f5f"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a></td></tr>
<tr class="separator:ae11702dfa53bf9e68329fe53c28e0f5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4900e430a51bd248a1f297f0af5fea9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1shared__mutex.html">souffle::shared_mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">mapLock</a></td></tr>
<tr class="separator:aa4900e430a51bd248a1f297f0af5fea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac79d64015fe4fcf0e6477e6eeca66940"><td class="memItemLeft" align="right" valign="top">std::atomic&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a></td></tr>
<tr class="separator:ac79d64015fe4fcf0e6477e6eeca66940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e65e8923864fa87ce286c8cd6457801"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classsouffle_1_1shared__mutex.html">souffle::shared_mutex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">nodeLock</a></td></tr>
<tr class="separator:a6e65e8923864fa87ce286c8cd6457801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae616a52eaf3a159a29ca2a0bf71778e1"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>, <br class="typebreak"/>
<a class="el" href="classsouffle_1_1_block_list.html">BlockList</a>&lt; <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">repToSubords</a></td></tr>
<tr class="separator:ae616a52eaf3a159a29ca2a0bf71778e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Structure that emulates a Disjoint Set, i.e. </p>
<p>a data structure that supports efficient union-find operations </p>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00066">66</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a33727b0ab2cf3935fc115d15c951004e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">souffle::DisjointSet::DisjointSet </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00082">82</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;: <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>(<span class="keyword">true</span>), <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>(<span class="keyword">true</span>){};</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a72c6d822d03f4f5c29b7a487e0ad6858"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> souffle::DisjointSet::b2p </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>&#160;</td>
          <td class="paramname"><em>inblock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ï Extract parent from block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inblock</td><td>the block to be masked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The parent_t contained in the upper half of block_t </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00450">450</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00060">souffle::split_size</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>, <a class="el" href="_union_find_8h_source.html#l00153">readOnlyFindNode()</a>, <a class="el" href="_union_find_8h_source.html#l00326">sameSet()</a>, and <a class="el" href="_union_find_8h_source.html#l00170">updateRoot()</a>.</p>
<div class="fragment"><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                                                      {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>)(inblock &gt;&gt; <a class="code" href="namespacesouffle.html#ab6cae1829154de74317f872045c811c2">split_size</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    };</div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="namespacesouffle_html_ab6cae1829154de74317f872045c811c2"><div class="ttname"><a href="namespacesouffle.html#ab6cae1829154de74317f872045c811c2">souffle::split_size</a></div><div class="ttdeci">constexpr uint8_t split_size</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00060">UnionFind.h:60</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2537a5caf8cbb4ac1461528479558abd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> souffle::DisjointSet::b2r </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>&#160;</td>
          <td class="paramname"><em>inblock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Extract rank from block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inblock</td><td>the block to be masked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the rank_t contained in the lower half of block_t </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00459">459</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00061">souffle::rank_mask</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00341">unionNodes()</a>, and <a class="el" href="_union_find_8h_source.html#l00170">updateRoot()</a>.</p>
<div class="fragment"><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                                                    {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        <span class="keywordflow">return</span> (<a class="code" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a>)(inblock &amp; <a class="code" href="namespacesouffle.html#a10ebbb9279d847e1780c7423a4adf030">rank_mask</a>);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    };</div>
<div class="ttc" id="namespacesouffle_html_a10ebbb9279d847e1780c7423a4adf030"><div class="ttname"><a href="namespacesouffle.html#a10ebbb9279d847e1780c7423a4adf030">souffle::rank_mask</a></div><div class="ttdeci">constexpr block_t rank_mask</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00061">UnionFind.h:61</a></div></div>
<div class="ttc" id="namespacesouffle_html_a3c63236e23ffee74b1ec5b83cd735710"><div class="ttname"><a href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">souffle::rank_t</a></div><div class="ttdeci">uint32_t rank_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00056">UnionFind.h:56</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af64df2bdb9592f3ead35d9ebdbfd131e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a> souffle::DisjointSet::begin </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>rep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00293">293</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                 {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        this-&gt;<a class="code" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">genMap</a>();</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        <span class="keywordflow">return</span> iterator(<span class="keyword">this</span>, rep);</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a029aecfdfd76964bb35b44a36f68b495"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">souffle::DisjointSet::genMap</a></div><div class="ttdeci">void genMap()</div><div class="ttdoc">Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the repres...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00412">UnionFind.h:412</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_af64df2bdb9592f3ead35d9ebdbfd131e_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_af64df2bdb9592f3ead35d9ebdbfd131e_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_af64df2bdb9592f3ead35d9ebdbfd131e_cgraph" id="classsouffle_1_1_disjoint_set_af64df2bdb9592f3ead35d9ebdbfd131e_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495" title="Generate representative&#45;&gt;group map for all elements in the disjoint set Keys of the map are the repres..." alt="" coords="187,129,320,170"/><area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="369,5,519,46"/><area shape="rect" id="node4" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="369,70,519,111"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049" title="Performs a find operation on every node s.t. " alt="" coords="377,187,511,229"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="568,125,701,166"/><area shape="rect" id="node9" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="749,256,912,283"/><area shape="rect" id="node8" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="568,190,701,231"/><area shape="rect" id="node7" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="769,74,892,115"/><area shape="rect" id="node10" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="764,139,897,181"/><area shape="rect" id="node11" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="751,205,910,232"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6e676c57de1fcb9b7b70ca0c38387388"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a> souffle::DisjointSet::beginReps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00283">283</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                         {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        this-&gt;<a class="code" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">genMap</a>();</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">return</span> iterator(<span class="keyword">this</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a029aecfdfd76964bb35b44a36f68b495"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">souffle::DisjointSet::genMap</a></div><div class="ttdeci">void genMap()</div><div class="ttdoc">Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the repres...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00412">UnionFind.h:412</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a6e676c57de1fcb9b7b70ca0c38387388_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a6e676c57de1fcb9b7b70ca0c38387388_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a6e676c57de1fcb9b7b70ca0c38387388_cgraph" id="classsouffle_1_1_disjoint_set_a6e676c57de1fcb9b7b70ca0c38387388_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495" title="Generate representative&#45;&gt;group map for all elements in the disjoint set Keys of the map are the repres..." alt="" coords="187,129,320,170"/><area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="369,5,519,46"/><area shape="rect" id="node4" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="369,70,519,111"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049" title="Performs a find operation on every node s.t. " alt="" coords="377,187,511,229"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="568,125,701,166"/><area shape="rect" id="node9" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="749,256,912,283"/><area shape="rect" id="node8" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="568,190,701,231"/><area shape="rect" id="node7" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="769,74,892,115"/><area shape="rect" id="node10" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="764,139,897,181"/><area shape="rect" id="node11" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="751,205,910,232"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1f1cc3ae1037b261ea9fae7dc7c307d0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::DisjointSet::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Clears the <a class="el" href="classsouffle_1_1_disjoint_set.html" title="Structure that emulates a Disjoint Set, i.e. ">DisjointSet</a> of all nodes Invalidates all iterators. </p>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00306">306</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00068">a_blocks</a>, <a class="el" href="_block_list_8h_source.html#l00312">souffle::BlockList&lt; T &gt;::clear()</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, <a class="el" href="_util_8h_source.html#l01165">souffle::shared_mutex::lock()</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, <a class="el" href="_union_find_8h_source.html#l00071">nodeLock</a>, <a class="el" href="_union_find_8h_source.html#l00079">repToSubords</a>, and <a class="el" href="_util_8h_source.html#l01181">souffle::shared_mutex::unlock()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00648">souffle::SparseDisjointSet&lt; DomainInt &gt;::clear()</a>.</p>
<div class="fragment"><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                 {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="comment">// Warning! Not threadsafe..</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">nodeLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f">lock</a>();</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">repToSubords</a>.clear();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a>.<a class="code" href="classsouffle_1_1_block_list.html#a03481c6d7db152725482d352682be6f6">clear</a>();</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">nodeLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">unlock</a>();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_ad60e7af48bb6dce582527e3519d90e2f"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f">souffle::shared_mutex::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01165">Util.h:1165</a></div></div>
<div class="ttc" id="classsouffle_1_1_block_list_html_a03481c6d7db152725482d352682be6f6"><div class="ttname"><a href="classsouffle_1_1_block_list.html#a03481c6d7db152725482d352682be6f6">souffle::BlockList::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdoc">Clear all elements from the BlockList. </div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00312">BlockList.h:312</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae9da5a949e2d97db9c284cecd8f6eb3c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">souffle::DisjointSet::a_blocks</a></div><div class="ttdeci">BlockList&lt; std::atomic&lt; block_t &gt; &gt; a_blocks</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00068">UnionFind.h:68</a></div></div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_aceeffa2b25aeae562ce70fe4e17ab1ce"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">souffle::shared_mutex::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01181">Util.h:1181</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a6e65e8923864fa87ce286c8cd6457801"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">souffle::DisjointSet::nodeLock</a></div><div class="ttdeci">souffle::shared_mutex nodeLock</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00071">UnionFind.h:71</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae616a52eaf3a159a29ca2a0bf71778e1"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">souffle::DisjointSet::repToSubords</a></div><div class="ttdeci">std::unordered_map&lt; parent_t, BlockList&lt; parent_t &gt; &gt; repToSubords</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00079">UnionFind.h:79</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a1f1cc3ae1037b261ea9fae7dc7c307d0_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a1f1cc3ae1037b261ea9fae7dc7c307d0_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a1f1cc3ae1037b261ea9fae7dc7c307d0_cgraph" id="classsouffle_1_1_disjoint_set_a1f1cc3ae1037b261ea9fae7dc7c307d0_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_block_list.html#a03481c6d7db152725482d352682be6f6" title="Clear all elements from the BlockList. " alt="" coords="201,5,324,46"/><area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="187,70,338,111"/><area shape="rect" id="node4" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="187,135,338,177"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af5ace3cf5563f7163312657c3511c8fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a> souffle::DisjointSet::end </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>rep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00297">297</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                               {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;        this-&gt;<a class="code" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">genMap</a>();</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        <span class="keywordflow">return</span> iterator(<span class="keyword">this</span>, rep, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a029aecfdfd76964bb35b44a36f68b495"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">souffle::DisjointSet::genMap</a></div><div class="ttdeci">void genMap()</div><div class="ttdoc">Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the repres...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00412">UnionFind.h:412</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_af5ace3cf5563f7163312657c3511c8fb_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_af5ace3cf5563f7163312657c3511c8fb_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_af5ace3cf5563f7163312657c3511c8fb_cgraph" id="classsouffle_1_1_disjoint_set_af5ace3cf5563f7163312657c3511c8fb_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495" title="Generate representative&#45;&gt;group map for all elements in the disjoint set Keys of the map are the repres..." alt="" coords="216,129,349,170"/><area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="398,5,549,46"/><area shape="rect" id="node4" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="398,70,549,111"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049" title="Performs a find operation on every node s.t. " alt="" coords="407,187,540,229"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="597,125,731,166"/><area shape="rect" id="node9" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="779,256,941,283"/><area shape="rect" id="node8" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="597,190,731,231"/><area shape="rect" id="node7" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="799,74,921,115"/><area shape="rect" id="node10" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="793,139,927,181"/><area shape="rect" id="node11" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="781,205,939,232"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad9e22917b7347408782da36c5b484a1c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_disjoint_set_1_1iterator.html">iterator</a> souffle::DisjointSet::endReps </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00287">287</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                       {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        this-&gt;<a class="code" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">genMap</a>();</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> iterator(<span class="keyword">this</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a029aecfdfd76964bb35b44a36f68b495"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">souffle::DisjointSet::genMap</a></div><div class="ttdeci">void genMap()</div><div class="ttdoc">Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the repres...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00412">UnionFind.h:412</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_ad9e22917b7347408782da36c5b484a1c_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_ad9e22917b7347408782da36c5b484a1c_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_ad9e22917b7347408782da36c5b484a1c_cgraph" id="classsouffle_1_1_disjoint_set_ad9e22917b7347408782da36c5b484a1c_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495" title="Generate representative&#45;&gt;group map for all elements in the disjoint set Keys of the map are the repres..." alt="" coords="187,129,320,170"/><area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="369,5,519,46"/><area shape="rect" id="node4" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="369,70,519,111"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049" title="Performs a find operation on every node s.t. " alt="" coords="377,187,511,229"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="568,125,701,166"/><area shape="rect" id="node9" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="749,256,912,283"/><area shape="rect" id="node8" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="568,190,701,231"/><area shape="rect" id="node7" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="769,74,892,115"/><area shape="rect" id="node10" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="764,139,897,181"/><area shape="rect" id="node11" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="751,205,910,232"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2ce1c705c01700abfa661adb33fbd049"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::DisjointSet::findAll </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a find operation on every node s.t. </p>
<p>all nodes have a direct ref to their set's representative This is only performed if necessary. </p>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00372">372</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, and <a class="el" href="_union_find_8h_source.html#l00096">size()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>.</p>
<div class="fragment"><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                   {</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>) {</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;            <span class="comment">// TODO: check whether we should use strong=false/true in findNode args</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> i = 0; i &lt; <a class="code" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621">size</a>(); ++i) <a class="code" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a>(i);</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        }</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a732a188aa3cf418c758503f9dee3f55c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">souffle::DisjointSet::findNode</a></div><div class="ttdeci">parent_t findNode(parent_t x, bool isStrong=true)</div><div class="ttdoc">Equivalent to the find() function in union/find Find the highest ancestor of the provided node - flat...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00126">UnionFind.h:126</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ab10aa0ba87a2a6a4f1ad402597167621"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621">souffle::DisjointSet::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00096">UnionFind.h:96</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a2ce1c705c01700abfa661adb33fbd049_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a2ce1c705c01700abfa661adb33fbd049_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a2ce1c705c01700abfa661adb33fbd049_cgraph" id="classsouffle_1_1_disjoint_set_a2ce1c705c01700abfa661adb33fbd049_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="187,70,320,111"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="187,149,320,190"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="368,5,531,32"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="383,57,516,98"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="370,123,529,149"/><area shape="rect" id="node7" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="388,174,511,215"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a732a188aa3cf418c758503f9dee3f55c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> souffle::DisjointSet::findNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isStrong</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Equivalent to the find() function in union/find Find the highest ancestor of the provided node - flattening as we go. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>the node to find the parent of, whilst flattening its set-tree </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The parent of x </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00126">126</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00450">b2p()</a>, <a class="el" href="_union_find_8h_source.html#l00459">b2r()</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, and <a class="el" href="_union_find_8h_source.html#l00469">pr2b()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00372">findAll()</a>, <a class="el" href="_union_find_8h_source.html#l00635">souffle::SparseDisjointSet&lt; DomainInt &gt;::findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00326">sameSet()</a>, and <a class="el" href="_union_find_8h_source.html#l00341">unionNodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                        {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        <span class="comment">// If x is its own parent return immediately</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        <span class="keywordflow">if</span> (x == <a class="code" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a>(<span class="keyword">get</span>(x))) {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">return</span> x;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        <a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> xState = <span class="keyword">get</span>(x);</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;        <a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> newParent = <a class="code" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a>(<a class="code" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a>(xState));</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;        <a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> newState = <a class="code" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">pr2b</a>(newParent, <a class="code" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">b2r</a>(xState));</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;        <span class="keywordflow">if</span> (isStrong)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            this-&gt;<span class="keyword">get</span>(x).compare_exchange_strong(xState, newState);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;            this-&gt;<span class="keyword">get</span>(x).compare_exchange_weak(xState, newState);</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <span class="keywordflow">return</span> newParent;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae892a7febe8076794433d5546a9a3b94"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">souffle::DisjointSet::pr2b</a></div><div class="ttdeci">static block_t pr2b(const parent_t parent, const rank_t rank)</div><div class="ttdoc">Yield a block given parent and rank. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00469">UnionFind.h:469</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a732a188aa3cf418c758503f9dee3f55c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">souffle::DisjointSet::findNode</a></div><div class="ttdeci">parent_t findNode(parent_t x, bool isStrong=true)</div><div class="ttdoc">Equivalent to the find() function in union/find Find the highest ancestor of the provided node - flat...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00126">UnionFind.h:126</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a72c6d822d03f4f5c29b7a487e0ad6858"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">souffle::DisjointSet::b2p</a></div><div class="ttdeci">static parent_t b2p(const block_t inblock)</div><div class="ttdoc">Ï Extract parent from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00450">UnionFind.h:450</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="namespacesouffle_html_ac0f91401943febd1544ad82fd99bcb04"><div class="ttname"><a href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">souffle::block_t</a></div><div class="ttdeci">uint64_t block_t</div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00221">BlockList.h:221</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a2537a5caf8cbb4ac1461528479558abd"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">souffle::DisjointSet::b2r</a></div><div class="ttdeci">static rank_t b2r(const block_t inblock)</div><div class="ttdoc">Extract rank from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00459">UnionFind.h:459</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a732a188aa3cf418c758503f9dee3f55c_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a732a188aa3cf418c758503f9dee3f55c_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a732a188aa3cf418c758503f9dee3f55c_cgraph" id="classsouffle_1_1_disjoint_set_a732a188aa3cf418c758503f9dee3f55c_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="187,5,349,32"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="189,56,347,83"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="201,107,335,149"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a029aecfdfd76964bb35b44a36f68b495"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::DisjointSet::genMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the representatives Values are the representative's children. </p>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00412">412</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00450">b2p()</a>, <a class="el" href="_union_find_8h_source.html#l00372">findAll()</a>, <a class="el" href="_util_8h_source.html#l01165">souffle::shared_mutex::lock()</a>, <a class="el" href="_union_find_8h_source.html#l00078">mapLock</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, <a class="el" href="_union_find_8h_source.html#l00079">repToSubords</a>, <a class="el" href="_union_find_8h_source.html#l00096">size()</a>, and <a class="el" href="_util_8h_source.html#l01181">souffle::shared_mutex::unlock()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00293">begin()</a>, <a class="el" href="_union_find_8h_source.html#l00283">beginReps()</a>, <a class="el" href="_union_find_8h_source.html#l00297">end()</a>, <a class="el" href="_union_find_8h_source.html#l00287">endReps()</a>, and <a class="el" href="_union_find_8h_source.html#l00434">numInSet()</a>.</p>
<div class="fragment"><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                  {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>) {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">mapLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f">lock</a>();</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>) {</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                <a class="code" href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">mapLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">unlock</a>();</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049">findAll</a>();</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(<span class="keyword">false</span>);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">repToSubords</a>.clear();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keywordflow">for</span> (<a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> i = 0; i &lt; <a class="code" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621">size</a>(); ++i) {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                <a class="code" href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">repToSubords</a>[<a class="code" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a>(this-&gt;<span class="keyword">get</span>(i))].add(i);</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">mapLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">unlock</a>();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_ad60e7af48bb6dce582527e3519d90e2f"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f">souffle::shared_mutex::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01165">Util.h:1165</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_aa4900e430a51bd248a1f297f0af5fea9"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">souffle::DisjointSet::mapLock</a></div><div class="ttdeci">souffle::shared_mutex mapLock</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00078">UnionFind.h:78</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a72c6d822d03f4f5c29b7a487e0ad6858"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">souffle::DisjointSet::b2p</a></div><div class="ttdeci">static parent_t b2p(const block_t inblock)</div><div class="ttdoc">Ï Extract parent from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00450">UnionFind.h:450</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ab10aa0ba87a2a6a4f1ad402597167621"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621">souffle::DisjointSet::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00096">UnionFind.h:96</a></div></div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_aceeffa2b25aeae562ce70fe4e17ab1ce"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">souffle::shared_mutex::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01181">Util.h:1181</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a2ce1c705c01700abfa661adb33fbd049"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049">souffle::DisjointSet::findAll</a></div><div class="ttdeci">void findAll()</div><div class="ttdoc">Performs a find operation on every node s.t. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00372">UnionFind.h:372</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae616a52eaf3a159a29ca2a0bf71778e1"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">souffle::DisjointSet::repToSubords</a></div><div class="ttdeci">std::unordered_map&lt; parent_t, BlockList&lt; parent_t &gt; &gt; repToSubords</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00079">UnionFind.h:79</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a029aecfdfd76964bb35b44a36f68b495_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a029aecfdfd76964bb35b44a36f68b495_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a029aecfdfd76964bb35b44a36f68b495_cgraph" id="classsouffle_1_1_disjoint_set_a029aecfdfd76964bb35b44a36f68b495_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="568,6,731,32"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049" title="Performs a find operation on every node s.t. " alt="" coords="196,60,329,101"/><area shape="rect" id="node7" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="387,122,520,164"/><area shape="rect" id="node9" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="187,177,338,218"/><area shape="rect" id="node10" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="187,242,338,284"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="387,57,520,98"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="570,56,729,83"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="583,108,716,149"/><area shape="rect" id="node8" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="588,173,711,214"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7e63b6218923a44e34d6333c4a8d2db9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;<a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>&gt;&amp; souffle::DisjointSet::get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>node</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Yield reference to the node by its node index. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">node</td><td>node to be searched </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the parent block of the specified node </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00114">114</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00068">a_blocks</a>, <a class="el" href="_block_list_8h_source.html#l00300">souffle::BlockList&lt; T &gt;::get()</a>, and <a class="el" href="_synthesiser_8cpp_source.html#l00268">node</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                                        {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        <span class="keyword">auto</span>&amp; ret = <a class="code" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a>.<a class="code" href="classsouffle_1_1_block_list.html#a0f42e2fc57517d2e306eae4e4056aeeb">get</a>(<a class="code" href="_synthesiser_8cpp.html#a67a32e5d40efd8e6086e8036d82970da">node</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;        <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    };</div>
<div class="ttc" id="_synthesiser_8cpp_html_a67a32e5d40efd8e6086e8036d82970da"><div class="ttname"><a href="_synthesiser_8cpp.html#a67a32e5d40efd8e6086e8036d82970da">node</a></div><div class="ttdeci">const RamNode &amp; node</div><div class="ttdef"><b>Definition:</b> <a href="_synthesiser_8cpp_source.html#l00268">Synthesiser.cpp:268</a></div></div>
<div class="ttc" id="classsouffle_1_1_block_list_html_a0f42e2fc57517d2e306eae4e4056aeeb"><div class="ttname"><a href="classsouffle_1_1_block_list.html#a0f42e2fc57517d2e306eae4e4056aeeb">souffle::BlockList::get</a></div><div class="ttdeci">T &amp; get(const size_t index) const </div><div class="ttdoc">Retrieve a reference to the stored value at index. </div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00300">BlockList.h:300</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae9da5a949e2d97db9c284cecd8f6eb3c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">souffle::DisjointSet::a_blocks</a></div><div class="ttdeci">BlockList&lt; std::atomic&lt; block_t &gt; &gt; a_blocks</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00068">UnionFind.h:68</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a7e63b6218923a44e34d6333c4a8d2db9_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a7e63b6218923a44e34d6333c4a8d2db9_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a7e63b6218923a44e34d6333c4a8d2db9_cgraph" id="classsouffle_1_1_disjoint_set_a7e63b6218923a44e34d6333c4a8d2db9_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_block_list.html#a0f42e2fc57517d2e306eae4e4056aeeb" title="Retrieve a reference to the stored value at index. " alt="" coords="213,5,363,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aeffaec2f3fc61d5ad016407edbb03d77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> souffle::DisjointSet::makeNode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Create a node with its parent as itself, rank 0. </p>
<dl class="section return"><dt>Returns</dt><dd>the newly created block </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00385">385</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00068">a_blocks</a>, <a class="el" href="_block_list_8h_source.html#l00280">souffle::BlockList&lt; T &gt;::add()</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, <a class="el" href="_util_8h_source.html#l01165">souffle::shared_mutex::lock()</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, <a class="el" href="_union_find_8h_source.html#l00071">nodeLock</a>, <a class="el" href="_union_find_8h_source.html#l00469">pr2b()</a>, <a class="el" href="_block_list_8h_source.html#l00272">souffle::BlockList&lt; T &gt;::size()</a>, and <a class="el" href="_util_8h_source.html#l01181">souffle::shared_mutex::unlock()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00493">souffle::SparseDisjointSet&lt; DomainInt &gt;::toDense()</a>.</p>
<div class="fragment"><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                              {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">nodeLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f">lock</a>();</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <span class="comment">// its parent is itself (size indicates the position in the listData structure)</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> xpar = (<a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>)<a class="code" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a>.<a class="code" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d">size</a>();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        <a class="code" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> xrank = 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        <a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> x = <a class="code" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">pr2b</a>(xpar, xrank);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a>.<a class="code" href="classsouffle_1_1_block_list.html#ab3c9239963328495d4fa0431ba99ad8d">add</a>(x);</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">nodeLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">unlock</a>();</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;        <span class="keywordflow">return</span> x;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae892a7febe8076794433d5546a9a3b94"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">souffle::DisjointSet::pr2b</a></div><div class="ttdeci">static block_t pr2b(const parent_t parent, const rank_t rank)</div><div class="ttdoc">Yield a block given parent and rank. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00469">UnionFind.h:469</a></div></div>
<div class="ttc" id="classsouffle_1_1_block_list_html_a08dac61add4b7984bbdda718c5a01c1d"><div class="ttname"><a href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d">souffle::BlockList::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">Size of List. </div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00272">BlockList.h:272</a></div></div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_ad60e7af48bb6dce582527e3519d90e2f"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f">souffle::shared_mutex::lock</a></div><div class="ttdeci">void lock()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01165">Util.h:1165</a></div></div>
<div class="ttc" id="classsouffle_1_1_block_list_html_ab3c9239963328495d4fa0431ba99ad8d"><div class="ttname"><a href="classsouffle_1_1_block_list.html#ab3c9239963328495d4fa0431ba99ad8d">souffle::BlockList::add</a></div><div class="ttdeci">void add(const T &amp;val)</div><div class="ttdoc">Add a value to the blocklist. </div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00280">BlockList.h:280</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae9da5a949e2d97db9c284cecd8f6eb3c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">souffle::DisjointSet::a_blocks</a></div><div class="ttdeci">BlockList&lt; std::atomic&lt; block_t &gt; &gt; a_blocks</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00068">UnionFind.h:68</a></div></div>
<div class="ttc" id="namespacesouffle_html_a3c63236e23ffee74b1ec5b83cd735710"><div class="ttname"><a href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">souffle::rank_t</a></div><div class="ttdeci">uint32_t rank_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00056">UnionFind.h:56</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="namespacesouffle_html_ac0f91401943febd1544ad82fd99bcb04"><div class="ttname"><a href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">souffle::block_t</a></div><div class="ttdeci">uint64_t block_t</div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00221">BlockList.h:221</a></div></div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_aceeffa2b25aeae562ce70fe4e17ab1ce"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce">souffle::shared_mutex::unlock</a></div><div class="ttdeci">void unlock()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01181">Util.h:1181</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a6e65e8923864fa87ce286c8cd6457801"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a6e65e8923864fa87ce286c8cd6457801">souffle::DisjointSet::nodeLock</a></div><div class="ttdeci">souffle::shared_mutex nodeLock</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00071">UnionFind.h:71</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_aeffaec2f3fc61d5ad016407edbb03d77_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_aeffaec2f3fc61d5ad016407edbb03d77_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_aeffaec2f3fc61d5ad016407edbb03d77_cgraph" id="classsouffle_1_1_disjoint_set_aeffaec2f3fc61d5ad016407edbb03d77_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_block_list.html#ab3c9239963328495d4fa0431ba99ad8d" title="Add a value to the blocklist. " alt="" coords="187,5,339,32"/><area shape="rect" id="node3" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="187,57,338,98"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="196,122,329,163"/><area shape="rect" id="node5" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="201,187,324,229"/><area shape="rect" id="node6" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="187,253,338,294"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9c5db24865c284099c61c8aafc2156e5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t souffle::DisjointSet::numInSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>rep</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00434">434</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>, <a class="el" href="_util_8h_source.html#l01190">souffle::shared_mutex::lock_shared()</a>, <a class="el" href="_union_find_8h_source.html#l00078">mapLock</a>, <a class="el" href="_union_find_8h_source.html#l00079">repToSubords</a>, and <a class="el" href="_util_8h_source.html#l01211">souffle::shared_mutex::unlock_shared()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00663">souffle::SparseDisjointSet&lt; DomainInt &gt;::sizeOfRepresentativeSet()</a>.</p>
<div class="fragment"><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                                  {</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="comment">// we may not have an up to date map underneath</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">genMap</a>();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">mapLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#ab1d7994033e112129ec4a709224c1357">lock_shared</a>();</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;        <span class="keyword">auto</span> sz = <a class="code" href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">repToSubords</a>.at(rep).size();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">mapLock</a>.<a class="code" href="classsouffle_1_1shared__mutex.html#a1aa7af74051a0f7d49f9b217aa82345e">unlock_shared</a>();</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        <span class="keywordflow">return</span> sz;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_ab1d7994033e112129ec4a709224c1357"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#ab1d7994033e112129ec4a709224c1357">souffle::shared_mutex::lock_shared</a></div><div class="ttdeci">void lock_shared()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01190">Util.h:1190</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_aa4900e430a51bd248a1f297f0af5fea9"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#aa4900e430a51bd248a1f297f0af5fea9">souffle::DisjointSet::mapLock</a></div><div class="ttdeci">souffle::shared_mutex mapLock</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00078">UnionFind.h:78</a></div></div>
<div class="ttc" id="classsouffle_1_1shared__mutex_html_a1aa7af74051a0f7d49f9b217aa82345e"><div class="ttname"><a href="classsouffle_1_1shared__mutex.html#a1aa7af74051a0f7d49f9b217aa82345e">souffle::shared_mutex::unlock_shared</a></div><div class="ttdeci">void unlock_shared()</div><div class="ttdef"><b>Definition:</b> <a href="_util_8h_source.html#l01211">Util.h:1211</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a029aecfdfd76964bb35b44a36f68b495"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495">souffle::DisjointSet::genMap</a></div><div class="ttdeci">void genMap()</div><div class="ttdoc">Generate representative-&gt;group map for all elements in the disjoint set Keys of the map are the repres...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00412">UnionFind.h:412</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae616a52eaf3a159a29ca2a0bf71778e1"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">souffle::DisjointSet::repToSubords</a></div><div class="ttdeci">std::unordered_map&lt; parent_t, BlockList&lt; parent_t &gt; &gt; repToSubords</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00079">UnionFind.h:79</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a9c5db24865c284099c61c8aafc2156e5_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a9c5db24865c284099c61c8aafc2156e5_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a9c5db24865c284099c61c8aafc2156e5_cgraph" id="classsouffle_1_1_disjoint_set_a9c5db24865c284099c61c8aafc2156e5_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a029aecfdfd76964bb35b44a36f68b495" title="Generate representative&#45;&gt;group map for all elements in the disjoint set Keys of the map are the repres..." alt="" coords="196,118,329,159"/><area shape="rect" id="node12" href="classsouffle_1_1shared__mutex.html#ab1d7994033e112129ec4a709224c1357" title="souffle::shared_mutex\l::lock_shared" alt="" coords="187,183,338,225"/><area shape="rect" id="node13" href="classsouffle_1_1shared__mutex.html#a1aa7af74051a0f7d49f9b217aa82345e" title="souffle::shared_mutex\l::unlock_shared" alt="" coords="187,249,338,290"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="768,5,931,32"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#a2ce1c705c01700abfa661adb33fbd049" title="Performs a find operation on every node s.t. " alt="" coords="396,59,529,101"/><area shape="rect" id="node8" href="classsouffle_1_1_disjoint_set.html#ab10aa0ba87a2a6a4f1ad402597167621" title="souffle::DisjointSet\l::size" alt="" coords="587,122,720,163"/><area shape="rect" id="node10" href="classsouffle_1_1shared__mutex.html#ad60e7af48bb6dce582527e3519d90e2f" title="souffle::shared_mutex\l::lock" alt="" coords="387,177,538,218"/><area shape="rect" id="node11" href="classsouffle_1_1shared__mutex.html#aceeffa2b25aeae562ce70fe4e17ab1ce" title="souffle::shared_mutex\l::unlock" alt="" coords="387,242,538,283"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="587,57,720,98"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="770,56,929,83"/><area shape="rect" id="node7" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="783,107,916,149"/><area shape="rect" id="node9" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="788,173,911,214"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a62f75e12bcc11d502b5ab8613718ca6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_disjoint_set.html">DisjointSet</a>&amp; souffle::DisjointSet::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classsouffle_1_1_disjoint_set.html">DisjointSet</a> &amp;&#160;</td>
          <td class="paramname"><em>old</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00085">85</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00068">a_blocks</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, and <a class="el" href="_union_find_8h_source.html#l00079">repToSubords</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                                                   {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span> (<span class="keyword">this</span> == &amp;old) <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a> = old.a_blocks;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">repToSubords</a> = old.repToSubords;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(old.isStale.load());</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(old.mapStale.load());</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae9da5a949e2d97db9c284cecd8f6eb3c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">souffle::DisjointSet::a_blocks</a></div><div class="ttdeci">BlockList&lt; std::atomic&lt; block_t &gt; &gt; a_blocks</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00068">UnionFind.h:68</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae616a52eaf3a159a29ca2a0bf71778e1"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae616a52eaf3a159a29ca2a0bf71778e1">souffle::DisjointSet::repToSubords</a></div><div class="ttdeci">std::unordered_map&lt; parent_t, BlockList&lt; parent_t &gt; &gt; repToSubords</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00079">UnionFind.h:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae892a7febe8076794433d5546a9a3b94"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> souffle::DisjointSet::pr2b </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>parent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a>&#160;</td>
          <td class="paramname"><em>rank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Yield a block given parent and rank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parent</td><td>the top half bits </td></tr>
    <tr><td class="paramname">rank</td><td>the lower half bits </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the resultant block after merge </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00469">469</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00060">souffle::split_size</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00385">makeNode()</a>, and <a class="el" href="_union_find_8h_source.html#l00170">updateRoot()</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                                                                         {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;        <span class="keywordflow">return</span> (((<a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>)parent) &lt;&lt; <a class="code" href="namespacesouffle.html#ab6cae1829154de74317f872045c811c2">split_size</a>) | rank;</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    };</div>
<div class="ttc" id="namespacesouffle_html_ab6cae1829154de74317f872045c811c2"><div class="ttname"><a href="namespacesouffle.html#ab6cae1829154de74317f872045c811c2">souffle::split_size</a></div><div class="ttdeci">constexpr uint8_t split_size</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00060">UnionFind.h:60</a></div></div>
<div class="ttc" id="namespacesouffle_html_ac0f91401943febd1544ad82fd99bcb04"><div class="ttname"><a href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">souffle::block_t</a></div><div class="ttdeci">uint64_t block_t</div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00221">BlockList.h:221</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="af4ebf17871df26784803b7177145a02c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> souffle::DisjointSet::readOnlyFindNode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>x</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read only version of findNode i.e. </p>
<p>it doesn't compress the tree when searching - it only finds the top representative </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>the node to find the rep of </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the representative that is found </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00153">153</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00450">b2p()</a>, and <a class="el" href="_synthesiser_8cpp_source.html#l00267">p</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00631">souffle::SparseDisjointSet&lt; DomainInt &gt;::readOnlyFindNode()</a>, and <a class="el" href="_union_find_8h_source.html#l00663">souffle::SparseDisjointSet&lt; DomainInt &gt;::sizeOfRepresentativeSet()</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                                {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> ii = <span class="keyword">get</span>(x);</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> <a class="code" href="_synthesiser_8cpp.html#a3d1584b0c6ef4ae58954e92d7f321116">p</a> = <a class="code" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a>(ii);</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="keywordflow">if</span> (x == p) <span class="keywordflow">return</span> x;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classsouffle_1_1_disjoint_set.html#af4ebf17871df26784803b7177145a02c">readOnlyFindNode</a>(p);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a72c6d822d03f4f5c29b7a487e0ad6858"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">souffle::DisjointSet::b2p</a></div><div class="ttdeci">static parent_t b2p(const block_t inblock)</div><div class="ttdoc">Ï Extract parent from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00450">UnionFind.h:450</a></div></div>
<div class="ttc" id="_synthesiser_8cpp_html_a3d1584b0c6ef4ae58954e92d7f321116"><div class="ttname"><a href="_synthesiser_8cpp.html#a3d1584b0c6ef4ae58954e92d7f321116">p</a></div><div class="ttdeci">Printer &amp; p</div><div class="ttdef"><b>Definition:</b> <a href="_synthesiser_8cpp_source.html#l00267">Synthesiser.cpp:267</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_af4ebf17871df26784803b7177145a02c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#af4ebf17871df26784803b7177145a02c">souffle::DisjointSet::readOnlyFindNode</a></div><div class="ttdeci">parent_t readOnlyFindNode(parent_t x) const </div><div class="ttdoc">Read only version of findNode i.e. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00153">UnionFind.h:153</a></div></div>
<div class="ttc" id="namespacesouffle_html_ac0f91401943febd1544ad82fd99bcb04"><div class="ttname"><a href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">souffle::block_t</a></div><div class="ttdeci">uint64_t block_t</div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00221">BlockList.h:221</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_af4ebf17871df26784803b7177145a02c_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_af4ebf17871df26784803b7177145a02c_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_af4ebf17871df26784803b7177145a02c_cgraph" id="classsouffle_1_1_disjoint_set_af4ebf17871df26784803b7177145a02c_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="192,12,355,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abb14c55059807b69f2d8a3c50702c54f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::DisjointSet::sameSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether the two indices are in the same set. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>node to be checked </td></tr>
    <tr><td class="paramname">y</td><td>node to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>where the two indices are in the same set </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00326">326</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00450">b2p()</a>, and <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00627">souffle::SparseDisjointSet&lt; DomainInt &gt;::sameSet()</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                                         {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            x = <a class="code" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a>(x, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            y = <a class="code" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a>(y, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            <span class="keywordflow">if</span> (x == y) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;            <span class="comment">// if x&#39;s parent is itself, they are not the same set</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a>(<span class="keyword">get</span>(x)) == x) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a732a188aa3cf418c758503f9dee3f55c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">souffle::DisjointSet::findNode</a></div><div class="ttdeci">parent_t findNode(parent_t x, bool isStrong=true)</div><div class="ttdoc">Equivalent to the find() function in union/find Find the highest ancestor of the provided node - flat...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00126">UnionFind.h:126</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a72c6d822d03f4f5c29b7a487e0ad6858"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">souffle::DisjointSet::b2p</a></div><div class="ttdeci">static parent_t b2p(const block_t inblock)</div><div class="ttdoc">Ï Extract parent from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00450">UnionFind.h:450</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_abb14c55059807b69f2d8a3c50702c54f_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_abb14c55059807b69f2d8a3c50702c54f_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_abb14c55059807b69f2d8a3c50702c54f_cgraph" id="classsouffle_1_1_disjoint_set_abb14c55059807b69f2d8a3c50702c54f_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="368,5,531,32"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="187,53,320,94"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="370,57,529,84"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="383,109,516,150"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab10aa0ba87a2a6a4f1ad402597167621"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t souffle::DisjointSet::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00096">96</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00068">a_blocks</a>, and <a class="el" href="_block_list_8h_source.html#l00272">souffle::BlockList&lt; T &gt;::size()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00372">findAll()</a>, <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>, and <a class="el" href="_union_find_8h_source.html#l00643">souffle::SparseDisjointSet&lt; DomainInt &gt;::size()</a>.</p>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                               {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        <span class="keyword">auto</span> sz = <a class="code" href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">a_blocks</a>.<a class="code" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d">size</a>();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordflow">return</span> sz;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_block_list_html_a08dac61add4b7984bbdda718c5a01c1d"><div class="ttname"><a href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d">souffle::BlockList::size</a></div><div class="ttdeci">size_t size() const </div><div class="ttdoc">Size of List. </div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00272">BlockList.h:272</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae9da5a949e2d97db9c284cecd8f6eb3c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae9da5a949e2d97db9c284cecd8f6eb3c">souffle::DisjointSet::a_blocks</a></div><div class="ttdeci">BlockList&lt; std::atomic&lt; block_t &gt; &gt; a_blocks</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00068">UnionFind.h:68</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_ab10aa0ba87a2a6a4f1ad402597167621_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_ab10aa0ba87a2a6a4f1ad402597167621_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_ab10aa0ba87a2a6a4f1ad402597167621_cgraph" id="classsouffle_1_1_disjoint_set_ab10aa0ba87a2a6a4f1ad402597167621_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_block_list.html#a08dac61add4b7984bbdda718c5a01c1d" title="Size of List. " alt="" coords="187,5,309,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a218c578b1a2d3c9c81f3d8bb08ee465a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::DisjointSet::staleList </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00101">101</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00215">souffle::DisjointSet::iterator::yield()</a>.</p>
<div class="fragment"><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                                  {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a59367ae2fc74565c222838f6e3c69a7e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::DisjointSet::staleMap </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00105">105</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00215">souffle::DisjointSet::iterator::yield()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                 {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    };</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a708d264ee2f9ec6bf7ed995af20a062c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void souffle::DisjointSet::unionNodes </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Union the two specified index nodes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>node to be unioned </td></tr>
    <tr><td class="paramname">y</td><td>node to be unioned </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00341">341</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00459">b2r()</a>, <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, and <a class="el" href="_union_find_8h_source.html#l00170">updateRoot()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00639">souffle::SparseDisjointSet&lt; DomainInt &gt;::unionNodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                                            {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            x = <a class="code" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a>(x, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            y = <a class="code" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">findNode</a>(y, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;            <span class="comment">// no need to union if both already in same set</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">if</span> (x == y) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> xrank = <a class="code" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">b2r</a>(<span class="keyword">get</span>(x));</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <a class="code" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> yrank = <a class="code" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">b2r</a>(<span class="keyword">get</span>(y));</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="comment">// if x comes before y (better rank or earlier &amp; equal node)</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="keywordflow">if</span> (xrank &gt; yrank || ((xrank == yrank) &amp;&amp; x &gt; y)) {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                std::swap(x, y);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                std::swap(xrank, yrank);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            }</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="comment">// join the trees together</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="comment">// perhaps we can optimise the use of compare_exchange_strong here, as we&#39;re in a pessimistic loop</span></div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="classsouffle_1_1_disjoint_set.html#af1a0911ad685d6580d60f968e36a5b4b">updateRoot</a>(x, xrank, y, yrank, <span class="keyword">true</span>)) <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            <span class="keywordflow">if</span> (xrank == yrank) <a class="code" href="classsouffle_1_1_disjoint_set.html#af1a0911ad685d6580d60f968e36a5b4b">updateRoot</a>(y, yrank, y, yrank + 1, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_af1a0911ad685d6580d60f968e36a5b4b"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#af1a0911ad685d6580d60f968e36a5b4b">souffle::DisjointSet::updateRoot</a></div><div class="ttdeci">bool updateRoot(const parent_t x, const rank_t oldrank, const parent_t y, const rank_t newrank, bool isStrong)</div><div class="ttdoc">Update the root of the tree of which x is, to have y as the base instead. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00170">UnionFind.h:170</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a732a188aa3cf418c758503f9dee3f55c"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c">souffle::DisjointSet::findNode</a></div><div class="ttdeci">parent_t findNode(parent_t x, bool isStrong=true)</div><div class="ttdoc">Equivalent to the find() function in union/find Find the highest ancestor of the provided node - flat...</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00126">UnionFind.h:126</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="namespacesouffle_html_a3c63236e23ffee74b1ec5b83cd735710"><div class="ttname"><a href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">souffle::rank_t</a></div><div class="ttdeci">uint32_t rank_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00056">UnionFind.h:56</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a2537a5caf8cbb4ac1461528479558abd"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">souffle::DisjointSet::b2r</a></div><div class="ttdeci">static rank_t b2r(const block_t inblock)</div><div class="ttdoc">Extract rank from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00459">UnionFind.h:459</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_a708d264ee2f9ec6bf7ed995af20a062c_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_a708d264ee2f9ec6bf7ed995af20a062c_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_a708d264ee2f9ec6bf7ed995af20a062c_cgraph" id="classsouffle_1_1_disjoint_set_a708d264ee2f9ec6bf7ed995af20a062c_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="370,5,529,32"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a732a188aa3cf418c758503f9dee3f55c" title="Equivalent to the find() function in union/find Find the highest ancestor of the provided node &#45; flat..." alt="" coords="187,115,320,157"/><area shape="rect" id="node6" href="classsouffle_1_1_disjoint_set.html#af1a0911ad685d6580d60f968e36a5b4b" title="Update the root of the tree of which x is, to have y as the base instead. " alt="" coords="187,50,320,91"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="368,123,531,149"/><area shape="rect" id="node5" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="383,57,516,98"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af1a0911ad685d6580d60f968e36a5b4b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::DisjointSet::updateRoot </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a>&#160;</td>
          <td class="paramname"><em>oldrank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a>&#160;</td>
          <td class="paramname"><em>newrank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>isStrong</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Update the root of the tree of which x is, to have y as the base instead. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>: old root </td></tr>
    <tr><td class="paramname">oldrank</td><td>: old root rank </td></tr>
    <tr><td class="paramname">y</td><td>: new root </td></tr>
    <tr><td class="paramname">newrank</td><td>: new root rank </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Whether the update succeeded (fails if another root update/union has been perfomed in the interim) </dd></dl>

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00170">170</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>References <a class="el" href="_union_find_8h_source.html#l00450">b2p()</a>, <a class="el" href="_union_find_8h_source.html#l00459">b2r()</a>, <a class="el" href="_union_find_8h_source.html#l00074">isStale</a>, <a class="el" href="_union_find_8h_source.html#l00075">mapStale</a>, and <a class="el" href="_union_find_8h_source.html#l00469">pr2b()</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00341">unionNodes()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                                                                                           {</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">isStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">mapStale</a>.store(<span class="keyword">true</span>);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> oldState = <span class="keyword">get</span>(x);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        <a class="code" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a> nextN = <a class="code" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">b2p</a>(oldState);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;        <a class="code" href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">rank_t</a> rankN = <a class="code" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">b2r</a>(oldState);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        <span class="keywordflow">if</span> (nextN != x || rankN != oldrank) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;        <span class="comment">// set the parent and rank of the new record</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        <a class="code" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a> newVal = <a class="code" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">pr2b</a>(y, newrank);</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">if</span> (isStrong) <span class="keywordflow">return</span> this-&gt;<span class="keyword">get</span>(x).compare_exchange_strong(oldState, newVal);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        <span class="keywordflow">return</span> this-&gt;<span class="keyword">get</span>(x).compare_exchange_weak(oldState, newVal);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    }</div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae892a7febe8076794433d5546a9a3b94"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94">souffle::DisjointSet::pr2b</a></div><div class="ttdeci">static block_t pr2b(const parent_t parent, const rank_t rank)</div><div class="ttdoc">Yield a block given parent and rank. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00469">UnionFind.h:469</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ae11702dfa53bf9e68329fe53c28e0f5f"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ae11702dfa53bf9e68329fe53c28e0f5f">souffle::DisjointSet::isStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; isStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00074">UnionFind.h:74</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_ac79d64015fe4fcf0e6477e6eeca66940"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#ac79d64015fe4fcf0e6477e6eeca66940">souffle::DisjointSet::mapStale</a></div><div class="ttdeci">std::atomic&lt; bool &gt; mapStale</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00075">UnionFind.h:75</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a72c6d822d03f4f5c29b7a487e0ad6858"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858">souffle::DisjointSet::b2p</a></div><div class="ttdeci">static parent_t b2p(const block_t inblock)</div><div class="ttdoc">Ï Extract parent from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00450">UnionFind.h:450</a></div></div>
<div class="ttc" id="namespacesouffle_html_a3c63236e23ffee74b1ec5b83cd735710"><div class="ttname"><a href="namespacesouffle.html#a3c63236e23ffee74b1ec5b83cd735710">souffle::rank_t</a></div><div class="ttdeci">uint32_t rank_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00056">UnionFind.h:56</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae042659e2cf9240dc085d2d4da94a5f8"><div class="ttname"><a href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">souffle::parent_t</a></div><div class="ttdeci">uint32_t parent_t</div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00057">UnionFind.h:57</a></div></div>
<div class="ttc" id="namespacesouffle_html_ac0f91401943febd1544ad82fd99bcb04"><div class="ttname"><a href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">souffle::block_t</a></div><div class="ttdeci">uint64_t block_t</div><div class="ttdef"><b>Definition:</b> <a href="_block_list_8h_source.html#l00221">BlockList.h:221</a></div></div>
<div class="ttc" id="classsouffle_1_1_disjoint_set_html_a2537a5caf8cbb4ac1461528479558abd"><div class="ttname"><a href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd">souffle::DisjointSet::b2r</a></div><div class="ttdeci">static rank_t b2r(const block_t inblock)</div><div class="ttdoc">Extract rank from block. </div><div class="ttdef"><b>Definition:</b> <a href="_union_find_8h_source.html#l00459">UnionFind.h:459</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_disjoint_set_af1a0911ad685d6580d60f968e36a5b4b_cgraph.png" border="0" usemap="#classsouffle_1_1_disjoint_set_af1a0911ad685d6580d60f968e36a5b4b_cgraph" alt=""/></div>
<map name="classsouffle_1_1_disjoint_set_af1a0911ad685d6580d60f968e36a5b4b_cgraph" id="classsouffle_1_1_disjoint_set_af1a0911ad685d6580d60f968e36a5b4b_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_disjoint_set.html#a72c6d822d03f4f5c29b7a487e0ad6858" title="Ï Extract parent from block. " alt="" coords="187,5,349,32"/><area shape="rect" id="node3" href="classsouffle_1_1_disjoint_set.html#a2537a5caf8cbb4ac1461528479558abd" title="Extract rank from block. " alt="" coords="189,56,347,83"/><area shape="rect" id="node4" href="classsouffle_1_1_disjoint_set.html#ae892a7febe8076794433d5546a9a3b94" title="Yield a block given parent and rank. " alt="" coords="201,107,335,149"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="ae9da5a949e2d97db9c284cecd8f6eb3c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1_block_list.html">BlockList</a>&lt;std::atomic&lt;<a class="el" href="namespacesouffle.html#ac0f91401943febd1544ad82fd99bcb04">block_t</a>&gt; &gt; souffle::DisjointSet::a_blocks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00068">68</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00306">clear()</a>, <a class="el" href="_union_find_8h_source.html#l00114">get()</a>, <a class="el" href="_union_find_8h_source.html#l00385">makeNode()</a>, <a class="el" href="_union_find_8h_source.html#l00085">operator=()</a>, and <a class="el" href="_union_find_8h_source.html#l00096">size()</a>.</p>

</div>
</div>
<a class="anchor" id="ae11702dfa53bf9e68329fe53c28e0f5f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; souffle::DisjointSet::isStale</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00074">74</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00306">clear()</a>, <a class="el" href="_union_find_8h_source.html#l00372">findAll()</a>, <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00385">makeNode()</a>, <a class="el" href="_union_find_8h_source.html#l00085">operator=()</a>, <a class="el" href="_union_find_8h_source.html#l00101">staleList()</a>, <a class="el" href="_union_find_8h_source.html#l00341">unionNodes()</a>, and <a class="el" href="_union_find_8h_source.html#l00170">updateRoot()</a>.</p>

</div>
</div>
<a class="anchor" id="aa4900e430a51bd248a1f297f0af5fea9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1shared__mutex.html">souffle::shared_mutex</a> souffle::DisjointSet::mapLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00078">78</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>, and <a class="el" href="_union_find_8h_source.html#l00434">numInSet()</a>.</p>

</div>
</div>
<a class="anchor" id="ac79d64015fe4fcf0e6477e6eeca66940"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::atomic&lt;bool&gt; souffle::DisjointSet::mapStale</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00075">75</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00306">clear()</a>, <a class="el" href="_union_find_8h_source.html#l00126">findNode()</a>, <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>, <a class="el" href="_union_find_8h_source.html#l00385">makeNode()</a>, <a class="el" href="_union_find_8h_source.html#l00085">operator=()</a>, <a class="el" href="_union_find_8h_source.html#l00105">staleMap()</a>, <a class="el" href="_union_find_8h_source.html#l00341">unionNodes()</a>, and <a class="el" href="_union_find_8h_source.html#l00170">updateRoot()</a>.</p>

</div>
</div>
<a class="anchor" id="a6e65e8923864fa87ce286c8cd6457801"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classsouffle_1_1shared__mutex.html">souffle::shared_mutex</a> souffle::DisjointSet::nodeLock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00071">71</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00306">clear()</a>, and <a class="el" href="_union_find_8h_source.html#l00385">makeNode()</a>.</p>

</div>
</div>
<a class="anchor" id="ae616a52eaf3a159a29ca2a0bf71778e1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>, <a class="el" href="classsouffle_1_1_block_list.html">BlockList</a>&lt;<a class="el" href="namespacesouffle.html#ae042659e2cf9240dc085d2d4da94a5f8">parent_t</a>&gt; &gt; souffle::DisjointSet::repToSubords</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_union_find_8h_source.html#l00079">79</a> of file <a class="el" href="_union_find_8h_source.html">UnionFind.h</a>.</p>

<p>Referenced by <a class="el" href="_union_find_8h_source.html#l00306">clear()</a>, <a class="el" href="_union_find_8h_source.html#l00412">genMap()</a>, <a class="el" href="_union_find_8h_source.html#l00434">numInSet()</a>, and <a class="el" href="_union_find_8h_source.html#l00085">operator=()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_union_find_8h_source.html">UnionFind.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 14 2018 11:37:59 for souffle by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
