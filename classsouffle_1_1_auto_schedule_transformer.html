<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>souffle: souffle::AutoScheduleTransformer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">souffle
   &#160;<span id="projectnumber">1.2.0-360-gecb9d25</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacesouffle.html">souffle</a></li><li class="navelem"><a class="el" href="classsouffle_1_1_auto_schedule_transformer.html">AutoScheduleTransformer</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">souffle::AutoScheduleTransformer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Transformation pass which tunes the given program by re-ordering the atoms in the included rules to improve performance.  
 <a href="classsouffle_1_1_auto_schedule_transformer.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_ast_tuner_8h_source.html">AstTuner.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for souffle::AutoScheduleTransformer:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_auto_schedule_transformer__inherit__graph.png" border="0" usemap="#souffle_1_1_auto_schedule_transformer_inherit__map" alt="Inheritance graph"/></div>
<map name="souffle_1_1_auto_schedule_transformer_inherit__map" id="souffle_1_1_auto_schedule_transformer_inherit__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_transformer.html" title="{souffle::AstTransformer\n||+ apply()\l+ getName()\l+ ~AstTransformer()\l&#45; transform()\l}" alt="" coords="35,6,193,127"/></map>
</div>
<div class="dynheader">
Collaboration diagram for souffle::AutoScheduleTransformer:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_auto_schedule_transformer__coll__graph.png" border="0" usemap="#souffle_1_1_auto_schedule_transformer_coll__map" alt="Collaboration graph"/></div>
<map name="souffle_1_1_auto_schedule_transformer_coll__map" id="souffle_1_1_auto_schedule_transformer_coll__map">
<area shape="rect" id="node2" href="classsouffle_1_1_ast_transformer.html" title="{souffle::AstTransformer\n||+ apply()\l+ getName()\l+ ~AstTransformer()\l&#45; transform()\l}" alt="" coords="35,6,193,127"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a3eaa43d9fa3583dab0a3b685c6a9e9cc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_auto_schedule_transformer.html#a3eaa43d9fa3583dab0a3b685c6a9e9cc">AutoScheduleTransformer</a> ()</td></tr>
<tr class="separator:a3eaa43d9fa3583dab0a3b685c6a9e9cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2a9f71bf06d5af34c7f110dbef1b633"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_auto_schedule_transformer.html#ae2a9f71bf06d5af34c7f110dbef1b633">getName</a> () const override</td></tr>
<tr class="separator:ae2a9f71bf06d5af34c7f110dbef1b633"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae548dbaf126bb8c87a873c43c2b30301"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_auto_schedule_transformer.html#ae548dbaf126bb8c87a873c43c2b30301">~AutoScheduleTransformer</a> () override=default</td></tr>
<tr class="separator:ae548dbaf126bb8c87a873c43c2b30301"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="inherit_header pub_methods_classsouffle_1_1_ast_transformer"><td colspan="2" onclick="javascript:toggleInherit('pub_methods_classsouffle_1_1_ast_transformer')"><img src="closed.png" alt="-"/>&#160;Public Member Functions inherited from <a class="el" href="classsouffle_1_1_ast_transformer.html">souffle::AstTransformer</a></td></tr>
<tr class="memitem:a32236031d6b2f0f8dc4bbe0a7aa90b43 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_transformer.html#a32236031d6b2f0f8dc4bbe0a7aa90b43">apply</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit)</td></tr>
<tr class="separator:a32236031d6b2f0f8dc4bbe0a7aa90b43 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3e84a3e9a223b7be8123c7af8f94f39 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_ast_transformer.html#af3e84a3e9a223b7be8123c7af8f94f39">~AstTransformer</a> ()=default</td></tr>
<tr class="separator:af3e84a3e9a223b7be8123c7af8f94f39 inherit pub_methods_classsouffle_1_1_ast_transformer"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:affa98dd90434b2f7667ec1814db7504b"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_auto_schedule_transformer.html#affa98dd90434b2f7667ec1814db7504b">autotune</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit, std::ostream *report)</td></tr>
<tr class="memdesc:affa98dd90434b2f7667ec1814db7504b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform auto-scheduling for the given program.  <a href="#affa98dd90434b2f7667ec1814db7504b">More...</a><br/></td></tr>
<tr class="separator:affa98dd90434b2f7667ec1814db7504b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a74c48e599742869430fd57fb91aa8b12"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsouffle_1_1_auto_schedule_transformer.html#a74c48e599742869430fd57fb91aa8b12">transform</a> (<a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;translationUnit) override</td></tr>
<tr class="separator:a74c48e599742869430fd57fb91aa8b12"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Transformation pass which tunes the given program by re-ordering the atoms in the included rules to improve performance. </p>
<p>This operation is based on an actual, interpreted execution of the given program and the collection of profiling data. </p>

<p>Definition at line <a class="el" href="_ast_tuner_8h_source.html#l00032">32</a> of file <a class="el" href="_ast_tuner_8h_source.html">AstTuner.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3eaa43d9fa3583dab0a3b685c6a9e9cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">souffle::AutoScheduleTransformer::AutoScheduleTransformer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="_ast_tuner_8h_source.html#l00037">37</a> of file <a class="el" href="_ast_tuner_8h_source.html">AstTuner.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae548dbaf126bb8c87a873c43c2b30301"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">souffle::AutoScheduleTransformer::~AutoScheduleTransformer </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="affa98dd90434b2f7667ec1814db7504b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::AutoScheduleTransformer::autotune </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::ostream *&#160;</td>
          <td class="paramname"><em>report</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform auto-scheduling for the given program. </p>
<dl class="section return"><dt>Returns</dt><dd>whether the program was modified </dd></dl>

<p>Definition at line <a class="el" href="_ast_tuner_8cpp_source.html#l00080">80</a> of file <a class="el" href="_ast_tuner_8cpp_source.html">AstTuner.cpp</a>.</p>

<p>References <a class="el" href="_global_8h_source.html#l00130">souffle::Global::config()</a>, <a class="el" href="_ast_tuner_8cpp_source.html#l00044">data</a>, <a class="el" href="_interpreter_8h_source.html#l00725">souffle::Interpreter::execute()</a>, <a class="el" href="_ast_clause_8h_source.html#l00306">souffle::AstClause::getAtoms()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00073">souffle::AstTranslationUnit::getProgram()</a>, <a class="el" href="_ast_translation_unit_8h_source.html#l00083">souffle::AstTranslationUnit::getSymbolTable()</a>, <a class="el" href="_interpreter_8h_source.html#l00621">souffle::ExecutionSummary::order</a>, <a class="el" href="_ast_clause_8cpp_source.html#l00111">souffle::AstClause::reorderAtoms()</a>, <a class="el" href="_interpreter_8cpp_source.html#l01002">souffle::ScheduledExecution</a>, <a class="el" href="_interpreter_8h_source.html#l00717">souffle::Interpreter::setReportTarget()</a>, <a class="el" href="_interpreter_8h_source.html#l00622">souffle::ExecutionSummary::time</a>, <a class="el" href="_ast_translator_8cpp_source.html#l01240">souffle::AstTranslator::translateProgram()</a>, and <a class="el" href="_ast_visitor_8h_source.html#l00215">souffle::visitDepthFirst()</a>.</p>

<p>Referenced by <a class="el" href="_ast_tuner_8cpp_source.html#l00067">transform()</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                                                                                              {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="keyword">const</span> <a class="code" href="namespacesouffle.html#ad9b2899eb6927d9ee92a3628e0c5f4fc">QueryExecutionStrategy</a>&amp; strategy = <a class="code" href="namespacesouffle.html#ae807f7b8118a77f250c57d1c3a08905e">ScheduledExecution</a>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordtype">bool</span> verbose = <a class="code" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">Global::config</a>().has(<span class="stringliteral">&quot;verbose&quot;</span>);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="comment">// start with status message</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;----------------- Auto-Scheduling Started -----------------\n&quot;</span>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// step 1 - translate to RAM program</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ Converting to RAM Program ...                           ]\n&quot;</span>;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    std::unique_ptr&lt;RamProgram&gt; prog = AstTranslator().translateProgram(translationUnit);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="keyword">const</span> RamStatement* stmt = prog-&gt;getMain();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// check whether there is something to tune</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="keywordflow">if</span> (!stmt) {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;        <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;[                                     No Rules in Program ]\n&quot;</span>;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;---------------- Auto-Scheduling Completed ----------------\n&quot;</span>;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[                                                    Done ]\n&quot;</span>;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// step 2 - run in interpreted mode, collect decisions</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ Profiling RAM Program ...                               ]\n&quot;</span>;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    Profiler::Data <a class="code" href="_ast_tuner_8cpp.html#ad05509a64790e25cfb28a937bc68114d">data</a>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    Profiler profiler(strategy, data);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// create a copy of the symbol table</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <a class="code" href="classsouffle_1_1_symbol_table.html">souffle::SymbolTable</a> table = translationUnit.getSymbolTable();</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// create interpreter instance</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    Interpreter interpreter(profiler);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <span class="keywordflow">if</span> (report &amp;&amp; verbose) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        SplitStream splitStream(report, &amp;std::cout);</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        interpreter.setReportTarget(splitStream);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (report) {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        interpreter.setReportTarget(*report);</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        interpreter.setReportTarget(std::cout);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    }</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// run interpreter</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    interpreter.execute(table, *prog);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[                                                    Done ]\n&quot;</span>;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;Data:\n&quot;</span>;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cur : data) {</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            std::cout &lt;&lt; <span class="stringliteral">&quot;Clause @ &quot;</span> &lt;&lt; cur.first &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">for</span> (<span class="keyword">const</span> ExecutionSummary&amp; instance : cur.second) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                std::cout &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; instance.order &lt;&lt; <span class="stringliteral">&quot; in &quot;</span> &lt;&lt; instance.time &lt;&lt; <span class="stringliteral">&quot;ms\n&quot;</span>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    }</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// step 3 - process collected data ..</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ Selecting most significant schedules ...                ]\n&quot;</span>;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    }</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    std::map&lt;AstSrcLocation, const AstClause*&gt; clauses;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <a class="code" href="namespacesouffle.html#a4e134334ce89f6ebc4075e1089b1f80d">visitDepthFirst</a>(*translationUnit.getProgram(),</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            [&amp;](<span class="keyword">const</span> AstClause&amp; clause) { clauses[clause.getSrcLoc()] = &amp;clause; });</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    std::map&lt;const AstClause*, long&gt; longestTime;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    std::map&lt;const AstClause*, Order&gt; bestOrders;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// extract best order for each clause</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cur : data) {</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        <span class="keyword">const</span> AstClause* clause = clauses[cur.first];</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        assert(clause &amp;&amp; <span class="stringliteral">&quot;Unknown clause discovered!&quot;</span>);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> ExecutionSummary&amp; instance : cur.second) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (longestTime[clause] &lt; instance.time) {</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                longestTime[clause] = instance.time;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                bestOrders[clause] = instance.order;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    }</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cur : bestOrders) {</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            std::cout &lt;&lt; *cur.first &lt;&lt; <span class="stringliteral">&quot;\n Best Order: &quot;</span> &lt;&lt; cur.second</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\n Time: &quot;</span> &lt;&lt; longestTime[cur.first] &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        }</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    }</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[                                                    Done ]\n&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    }</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">// step 4 - apply transformations</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[ Re-scheduling rules ...                                 ]\n&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    }</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; cur : bestOrders) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        AstClause* clause = <span class="keyword">const_cast&lt;</span>AstClause*<span class="keyword">&gt;</span>(cur.first);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="keywordtype">bool</span> orderChanged = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keyword">const</span> std::vector&lt;unsigned&gt;&amp; newOrder = cur.second.getOrder();</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        <span class="comment">// Check whether best order is different to the original order</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; clause-&gt;getAtoms().size(); i++) {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">if</span> (newOrder[i] != i) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                orderChanged = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            }</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="keywordflow">if</span> (orderChanged) {</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            clause-&gt;reorderAtoms(newOrder);</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            changed = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    }</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;[                                                    Done ]\n&quot;</span>;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// end with status message</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">if</span> (verbose) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        std::cout &lt;&lt; <span class="stringliteral">&quot;---------------- Auto-Scheduling Completed -----------------\n&quot;</span>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    }</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">return</span> changed;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div>
<div class="ttc" id="_ast_tuner_8cpp_html_ad05509a64790e25cfb28a937bc68114d"><div class="ttname"><a href="_ast_tuner_8cpp.html#ad05509a64790e25cfb28a937bc68114d">data</a></div><div class="ttdeci">Data &amp; data</div><div class="ttdoc">The recorded data. </div><div class="ttdef"><b>Definition:</b> <a href="_ast_tuner_8cpp_source.html#l00044">AstTuner.cpp:44</a></div></div>
<div class="ttc" id="classsouffle_1_1_symbol_table_html"><div class="ttname"><a href="classsouffle_1_1_symbol_table.html">souffle::SymbolTable</a></div><div class="ttdoc">Global pool of re-usable strings. </div><div class="ttdef"><b>Definition:</b> <a href="_symbol_table_8h_source.html#l00037">SymbolTable.h:37</a></div></div>
<div class="ttc" id="namespacesouffle_html_a4e134334ce89f6ebc4075e1089b1f80d"><div class="ttname"><a href="namespacesouffle.html#a4e134334ce89f6ebc4075e1089b1f80d">souffle::visitDepthFirst</a></div><div class="ttdeci">void visitDepthFirst(const AstNode &amp;root, AstVisitor&lt; R, Ps...&gt; &amp;visitor, Args &amp;...args)</div><div class="ttdoc">A utility function visiting all nodes within the ast rooted by the given node recursively in a depth-...</div><div class="ttdef"><b>Definition:</b> <a href="_ast_visitor_8h_source.html#l00215">AstVisitor.h:215</a></div></div>
<div class="ttc" id="classsouffle_1_1_global_html_a2dcb257b0f98d0b882862427cc965640"><div class="ttname"><a href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">souffle::Global::config</a></div><div class="ttdeci">static MainConfig &amp; config()</div><div class="ttdef"><b>Definition:</b> <a href="_global_8h_source.html#l00130">Global.h:130</a></div></div>
<div class="ttc" id="namespacesouffle_html_ad9b2899eb6927d9ee92a3628e0c5f4fc"><div class="ttname"><a href="namespacesouffle.html#ad9b2899eb6927d9ee92a3628e0c5f4fc">souffle::QueryExecutionStrategy</a></div><div class="ttdeci">std::function&lt; ExecutionSummary(const RamInsert &amp;, InterpreterEnvironment &amp;env, std::ostream *)&gt; QueryExecutionStrategy</div><div class="ttdoc">Defines the type of execution strategies for interpreter. </div><div class="ttdef"><b>Definition:</b> <a href="_interpreter_8h_source.html#l00627">Interpreter.h:627</a></div></div>
<div class="ttc" id="namespacesouffle_html_ae807f7b8118a77f250c57d1c3a08905e"><div class="ttname"><a href="namespacesouffle.html#ae807f7b8118a77f250c57d1c3a08905e">souffle::ScheduledExecution</a></div><div class="ttdeci">const QueryExecutionStrategy ScheduledExecution</div><div class="ttdoc">With this strategy queries will be dynamically rescheduled before each execution. ...</div><div class="ttdef"><b>Definition:</b> <a href="_interpreter_8cpp_source.html#l01002">Interpreter.cpp:1002</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_auto_schedule_transformer_affa98dd90434b2f7667ec1814db7504b_cgraph.png" border="0" usemap="#classsouffle_1_1_auto_schedule_transformer_affa98dd90434b2f7667ec1814db7504b_cgraph" alt=""/></div>
<map name="classsouffle_1_1_auto_schedule_transformer_affa98dd90434b2f7667ec1814db7504b_cgraph" id="classsouffle_1_1_auto_schedule_transformer_affa98dd90434b2f7667ec1814db7504b_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="1245,561,1395,588"/><area shape="rect" id="node3" href="classsouffle_1_1_interpreter.html#a618ef46708a3dd05e2dd35b33e03663c" title="Runs the given RAM statement on an empty environment and returns this environment after the completio..." alt="" coords="300,201,428,242"/><area shape="rect" id="node9" href="classsouffle_1_1_ast_clause.html#a349d1209cf619aaf6250c91e2cb0041d" title="Obtains a list of contained body&#45;atoms. " alt="" coords="1255,1895,1385,1937"/><area shape="rect" id="node11" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="506,354,683,395"/><area shape="rect" id="node12" href="classsouffle_1_1_ast_translation_unit.html#ad3c8a4225f4974ff9c8bad88f6690d9e" title="get symbol table " alt="" coords="275,2106,453,2147"/><area shape="rect" id="node13" href="classsouffle_1_1_ast_clause.html#a8c8bb94c830fe6b6ae48f7b88c161585" title="Re&#45;orders atoms to be in the given order. " alt="" coords="299,2171,429,2213"/><area shape="rect" id="node14" href="classsouffle_1_1_interpreter.html#ad2e79898fd8a854a319c9e9281bbd909" title="Update logging stream. " alt="" coords="300,2237,428,2278"/><area shape="rect" id="node15" href="classsouffle_1_1_ast_translator.html#aacac29895833f17d14c2ccab5d0e801f" title="Translate AST to RamProgram. " alt="" coords="291,910,437,951"/><area shape="rect" id="node48" href="namespacesouffle.html#a4e134334ce89f6ebc4075e1089b1f80d" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="517,2055,672,2081"/><area shape="rect" id="node4" href="classsouffle_1_1_interpreter.html#a49b4611bef424bacf4591697067e675c" title="run the program for a given interpreter environment " alt="" coords="531,165,659,206"/><area shape="rect" id="node5" href="classsouffle_1_1_signal_handler.html#ab7eed040c4ebc493e77f60046e820b6c" title="souffle::SignalHandler\l::instance" alt="" coords="766,135,917,177"/><area shape="rect" id="node6" href="classsouffle_1_1_signal_handler.html#a36fa4f2a7027a4d5f93acc7b848f9f41" title="souffle::SignalHandler::set" alt="" coords="753,201,929,228"/><area shape="rect" id="node7" href="classsouffle_1_1_ram_program.html#a700bc589281fd3f2478b074c3134d450" title="Get main program. " alt="" coords="768,5,915,46"/><area shape="rect" id="node8" href="classsouffle_1_1_signal_handler.html#a24026472ab9eeaecaafd4bd20b7af11f" title="souffle::SignalHandler\l::reset" alt="" coords="766,70,917,111"/><area shape="rect" id="node10" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1495,1751,1630,1777"/><area shape="rect" id="node16" href="namespacesouffle.html#a532e17c4416fc5873367482f2e0623d9" title="souffle::appendStmt" alt="" coords="1013,900,1152,927"/><area shape="rect" id="node18" href="namespacesouffle.html#ae9e37c3eb8d2931dbe421083736b6098" title="souffle::createAndLoad" alt="" coords="763,593,919,620"/><area shape="rect" id="node24" href="classsouffle_1_1_ast_translation_unit.html#a7a1598acb91192e90026763b3b968653" title="get analysis: analysis is generated on the fly if not present " alt="" coords="506,645,683,686"/><area shape="rect" id="node25" href="classsouffle_1_1_ast_clause.html#a9918f4fb19dd6f152d784512853b447a" title="Obtains a copy of the internally maintained body literals. " alt="" coords="1255,1045,1385,1086"/><area shape="rect" id="node26" href="classsouffle_1_1_ast_clause.html#a46a432b3284cd500a57eb181c31a3ccd" title="Gets the clause number. " alt="" coords="529,710,660,751"/><area shape="rect" id="node27" href="classsouffle_1_1_ast_clause.html#ae9a1e5dd0a7c9781e23a7d9ececd6ae5" title="Return the atom that represents the head of the clause. " alt="" coords="1255,1830,1385,1871"/><area shape="rect" id="node28" href="classsouffle_1_1_ast_atom.html#adfaa949dc3e89fa2dc25981963ea5752" title="Return the name of this atom. " alt="" coords="1472,1031,1653,1057"/><area shape="rect" id="node29" href="classsouffle_1_1_ast_program.html#a60fcb7d3a21a06be7b48f5849917a22b" title="Get all relations in the program. " alt="" coords="525,775,664,817"/><area shape="rect" id="node30" href="classsouffle_1_1_ast_translator.html#ac004a28e861d6d96bba1027d44dda8c8" title="generate RAM code for subroutine to get subproofs " alt="" coords="753,1197,929,1238"/><area shape="rect" id="node37" href="namespacesouffle.html#a9976cdaf1f15164ab4f40e8337e23fa2" title="souffle::printSizeStore" alt="" coords="766,747,917,773"/><area shape="rect" id="node39" href="classsouffle_1_1_ast_translator.html#ad523f47b3433c53e7e80014a7164e14f" title="Generates RAM code for the non&#45;recursive clauses of the given relation. " alt="" coords="736,1314,947,1355"/><area shape="rect" id="node44" href="classsouffle_1_1_ast_translator.html#acf09283a49379f14ab00fb06276bec19" title="generate RAM code for recursive relations in a strongly&#45;connected component " alt="" coords="501,1490,688,1531"/><area shape="rect" id="node17" href="classsouffle_1_1_ram_sequence.html#a0b409325b6311a7e7a19b1d84dae990f" title="Add new statement to the end of ordered list. " alt="" coords="1228,900,1412,927"/><area shape="rect" id="node19" href="classsouffle_1_1_ast_relation.html#a6ab4f4409da3c84af64b4a08d26ccd21" title="souffle::AstRelation\l::addIODirectives" alt="" coords="1014,586,1151,627"/><area shape="rect" id="node20" href="classsouffle_1_1_ast_relation.html#a855b01ad5e4a0871ef6c6f6bb1e95d13" title="Return the arity of this relation. " alt="" coords="1014,769,1151,810"/><area shape="rect" id="node21" href="classsouffle_1_1_ast_relation.html#a6ae505289ecfc8e40c9f4e47689f5ee8" title="Return the name of the relation. " alt="" coords="1014,651,1151,693"/><area shape="rect" id="node22" href="classsouffle_1_1_ast_relation.html#aa333dd84cbf78b723d3532baf2aaaaea" title="Check whether relation is an input relation. " alt="" coords="1014,455,1151,497"/><area shape="rect" id="node23" href="classsouffle_1_1_ast_relation.html#ae8a38221aa94f0df83f602fd1d1d0eb8" title="Check whether relation is an output relation. " alt="" coords="1014,521,1151,562"/><area shape="rect" id="node31" href="classsouffle_1_1_ast_clause.html#aef9cb574a067db73c83fd9c9f63d297f" title="Creates a clone if this AST sub&#45;structure. " alt="" coords="1255,1405,1385,1446"/><area shape="rect" id="node34" href="classsouffle_1_1_ast_atom.html#a11c5d1489f18c4981e9f4956fa2155de" title="Return the i&#45;th argument of the atom. " alt="" coords="1219,1233,1421,1260"/><area shape="rect" id="node35" href="classsouffle_1_1_ast_translator.html#ac2428fdd19059a4487d115d942d19f89" title="generate RAM code for a clause " alt="" coords="1009,1255,1156,1297"/><area shape="rect" id="node32" href="classsouffle_1_1_ast_clause.html#af03a18e982fbce1bb3866c18c5da192e" title="Obtains the execution plan associated to this clause or null if there is none. " alt="" coords="1497,1405,1629,1446"/><area shape="rect" id="node33" href="classsouffle_1_1_ast_node.html#a2ad833e42f55e6c61bdd12d6c5c2d482" title="Return source location of the AstNode. " alt="" coords="1469,1620,1656,1647"/><area shape="rect" id="node36" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="1237,1111,1403,1137"/><area shape="rect" id="node38" href="classsouffle_1_1_ast_relation.html#a5de0a60f392fd55905d648894f62f4ab" title="Check whether relation is an input relation. " alt="" coords="1014,834,1151,875"/><area shape="rect" id="node40" href="classsouffle_1_1_ast_relation.html#a0a748962a9a2151a2fabe585346fb0d7" title="Obtains a list of the associated clauses. " alt="" coords="1251,1599,1389,1641"/><area shape="rect" id="node41" href="classsouffle_1_1_recursive_clauses.html#a5d24ac527dc23bfc572637b5547161ad" title="souffle::RecursiveClauses\l::recursive" alt="" coords="995,1626,1171,1667"/><area shape="rect" id="node42" href="namespacesouffle.html#a06f428910159c119c1dcdcab76ab7dfa" title="Stringify a string using escapes for newline, tab, double&#45;quotes and semicolons. " alt="" coords="1025,1747,1140,1773"/><area shape="rect" id="node43" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1025,1473,1140,1500"/><area shape="rect" id="node45" href="classsouffle_1_1_ast_atom.html#a274d22e3c57da222d244c26f5937dd8a" title="Creates a clone if this AST sub&#45;structure. " alt="" coords="1241,1760,1399,1787"/><area shape="rect" id="node46" href="classsouffle_1_1_ast_execution_plan.html#a3e7a0d70a3eb432c0e7df4b26d5cb2d7" title="get maximal version number " alt="" coords="755,1431,928,1473"/><area shape="rect" id="node47" href="classsouffle_1_1_ast_atom.html#a92eeca331e34825aa9e7bcaabb812e56" title="Set atom name. " alt="" coords="751,1649,932,1676"/><area shape="rect" id="node49" href="namespacesouffle.html#ae3213abfc9e18e34bb08056ec91f7b86" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="764,2055,919,2097"/><area shape="rect" id="node50" href="classsouffle_1_1_ast_node.html#a3726392849b2a07142ba13bbd5fb16d2" title="Obtain a list of all embedded AST child nodes. " alt="" coords="995,2055,1171,2097"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae2a9f71bf06d5af34c7f110dbef1b633"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string souffle::AutoScheduleTransformer::getName </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">override</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a5f0905c069a0a2cf54e46e92499ba95c">souffle::AstTransformer</a>.</p>

<p>Definition at line <a class="el" href="_ast_tuner_8h_source.html#l00041">41</a> of file <a class="el" href="_ast_tuner_8h_source.html">AstTuner.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                                       {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;AutoScheduleTransformer&quot;</span>;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a74c48e599742869430fd57fb91aa8b12"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool souffle::AutoScheduleTransformer::transform </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classsouffle_1_1_ast_translation_unit.html">AstTranslationUnit</a> &amp;&#160;</td>
          <td class="paramname"><em>translationUnit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">private</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Implements <a class="el" href="classsouffle_1_1_ast_transformer.html#a6f2bde49dc0c328e8ef86918322282dc">souffle::AstTransformer</a>.</p>

<p>Definition at line <a class="el" href="_ast_tuner_8cpp_source.html#l00067">67</a> of file <a class="el" href="_ast_tuner_8cpp_source.html">AstTuner.cpp</a>.</p>

<p>References <a class="el" href="_debug_report_8h_source.html#l00084">souffle::DebugReport::addSection()</a>, <a class="el" href="_ast_tuner_8cpp_source.html#l00080">autotune()</a>, <a class="el" href="_global_8h_source.html#l00130">souffle::Global::config()</a>, <a class="el" href="_debug_report_8cpp_source.html#l00150">souffle::DebugReporter::getCodeSection()</a>, and <a class="el" href="_ast_translation_unit_8h_source.html#l00108">souffle::AstTranslationUnit::getDebugReport()</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                                                                           {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="keywordtype">bool</span> changed = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">Global::config</a>().<span class="keyword">get</span>(<span class="stringliteral">&quot;debug-report&quot;</span>).empty()) {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        std::stringstream report;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        changed = <a class="code" href="classsouffle_1_1_auto_schedule_transformer.html#affa98dd90434b2f7667ec1814db7504b">autotune</a>(translationUnit, &amp;report);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        translationUnit.getDebugReport().addSection(</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                <a class="code" href="classsouffle_1_1_debug_reporter.html#a0203b9b72ed2087b1b7604cdc75ecdbb">DebugReporter::getCodeSection</a>(<span class="stringliteral">&quot;auto-schedule&quot;</span>, <span class="stringliteral">&quot;Auto Schedule Report&quot;</span>, report.str()));</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        changed = <a class="code" href="classsouffle_1_1_auto_schedule_transformer.html#affa98dd90434b2f7667ec1814db7504b">autotune</a>(translationUnit, <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    }</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> changed;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="ttc" id="classsouffle_1_1_debug_reporter_html_a0203b9b72ed2087b1b7604cdc75ecdbb"><div class="ttname"><a href="classsouffle_1_1_debug_reporter.html#a0203b9b72ed2087b1b7604cdc75ecdbb">souffle::DebugReporter::getCodeSection</a></div><div class="ttdeci">static DebugReportSection getCodeSection(std::string id, std::string title, std::string code)</div><div class="ttdoc">Generate a debug report section for code (preserving formatting), with the given id and title...</div><div class="ttdef"><b>Definition:</b> <a href="_debug_report_8cpp_source.html#l00150">DebugReport.cpp:150</a></div></div>
<div class="ttc" id="classsouffle_1_1_auto_schedule_transformer_html_affa98dd90434b2f7667ec1814db7504b"><div class="ttname"><a href="classsouffle_1_1_auto_schedule_transformer.html#affa98dd90434b2f7667ec1814db7504b">souffle::AutoScheduleTransformer::autotune</a></div><div class="ttdeci">static bool autotune(AstTranslationUnit &amp;translationUnit, std::ostream *report)</div><div class="ttdoc">Perform auto-scheduling for the given program. </div><div class="ttdef"><b>Definition:</b> <a href="_ast_tuner_8cpp_source.html#l00080">AstTuner.cpp:80</a></div></div>
<div class="ttc" id="classsouffle_1_1_global_html_a2dcb257b0f98d0b882862427cc965640"><div class="ttname"><a href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640">souffle::Global::config</a></div><div class="ttdeci">static MainConfig &amp; config()</div><div class="ttdef"><b>Definition:</b> <a href="_global_8h_source.html#l00130">Global.h:130</a></div></div>
</div><!-- fragment -->
<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classsouffle_1_1_auto_schedule_transformer_a74c48e599742869430fd57fb91aa8b12_cgraph.png" border="0" usemap="#classsouffle_1_1_auto_schedule_transformer_a74c48e599742869430fd57fb91aa8b12_cgraph" alt=""/></div>
<map name="classsouffle_1_1_auto_schedule_transformer_a74c48e599742869430fd57fb91aa8b12_cgraph" id="classsouffle_1_1_auto_schedule_transformer_a74c48e599742869430fd57fb91aa8b12_cgraph">
<area shape="rect" id="node2" href="classsouffle_1_1_debug_report.html#a4e6fe0a6d9854ce570d008772daa9aba" title="souffle::DebugReport\l::addSection" alt="" coords="312,5,459,46"/><area shape="rect" id="node3" href="classsouffle_1_1_auto_schedule_transformer.html#affa98dd90434b2f7667ec1814db7504b" title="Perform auto&#45;scheduling for the given program. " alt="" coords="275,406,495,447"/><area shape="rect" id="node4" href="classsouffle_1_1_global.html#a2dcb257b0f98d0b882862427cc965640" title="souffle::Global::config" alt="" coords="1515,275,1664,301"/><area shape="rect" id="node49" href="classsouffle_1_1_debug_reporter.html#a0203b9b72ed2087b1b7604cdc75ecdbb" title="Generate a debug report section for code (preserving formatting), with the given id and title..." alt="" coords="307,471,464,513"/><area shape="rect" id="node50" href="classsouffle_1_1_ast_translation_unit.html#a2c05c0d93e34800167034b1aa423c4a0" title="get debug report " alt="" coords="297,537,474,578"/><area shape="rect" id="node5" href="classsouffle_1_1_interpreter.html#a618ef46708a3dd05e2dd35b33e03663c" title="Runs the given RAM statement on an empty environment and returns this environment after the completio..." alt="" coords="569,331,697,373"/><area shape="rect" id="node11" href="classsouffle_1_1_ast_clause.html#a349d1209cf619aaf6250c91e2cb0041d" title="Obtains a list of contained body&#45;atoms. " alt="" coords="1524,1599,1655,1641"/><area shape="rect" id="node13" href="classsouffle_1_1_ast_translation_unit.html#a85862a5fcfecdf63c7367926cdedde23" title="get the AST program " alt="" coords="775,406,953,447"/><area shape="rect" id="node14" href="classsouffle_1_1_ast_translation_unit.html#ad3c8a4225f4974ff9c8bad88f6690d9e" title="get symbol table " alt="" coords="545,1749,722,1790"/><area shape="rect" id="node15" href="classsouffle_1_1_ast_clause.html#a8c8bb94c830fe6b6ae48f7b88c161585" title="Re&#45;orders atoms to be in the given order. " alt="" coords="568,1814,699,1855"/><area shape="rect" id="node16" href="classsouffle_1_1_interpreter.html#ad2e79898fd8a854a319c9e9281bbd909" title="Update logging stream. " alt="" coords="569,122,697,163"/><area shape="rect" id="node17" href="classsouffle_1_1_ast_translator.html#aacac29895833f17d14c2ccab5d0e801f" title="Translate AST to RamProgram. " alt="" coords="560,785,707,826"/><area shape="rect" id="node47" href="namespacesouffle.html#a4e134334ce89f6ebc4075e1089b1f80d" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="787,1697,941,1724"/><area shape="rect" id="node6" href="classsouffle_1_1_interpreter.html#a49b4611bef424bacf4591697067e675c" title="run the program for a given interpreter environment " alt="" coords="800,315,928,357"/><area shape="rect" id="node7" href="classsouffle_1_1_signal_handler.html#ab7eed040c4ebc493e77f60046e820b6c" title="souffle::SignalHandler\l::instance" alt="" coords="1035,173,1186,214"/><area shape="rect" id="node8" href="classsouffle_1_1_signal_handler.html#a36fa4f2a7027a4d5f93acc7b848f9f41" title="souffle::SignalHandler::set" alt="" coords="1023,239,1199,265"/><area shape="rect" id="node9" href="classsouffle_1_1_ram_program.html#a700bc589281fd3f2478b074c3134d450" title="Get main program. " alt="" coords="1037,290,1184,331"/><area shape="rect" id="node10" href="classsouffle_1_1_signal_handler.html#a24026472ab9eeaecaafd4bd20b7af11f" title="souffle::SignalHandler\l::reset" alt="" coords="1035,355,1186,397"/><area shape="rect" id="node12" href="namespacesouffle.html#ad62d4e824a9d74c7462da546a21780fe" title="A utility function enabling the creation of a vector of pointers. " alt="" coords="1765,1400,1899,1427"/><area shape="rect" id="node18" href="namespacesouffle.html#a532e17c4416fc5873367482f2e0623d9" title="souffle::appendStmt" alt="" coords="1283,771,1421,797"/><area shape="rect" id="node20" href="namespacesouffle.html#ae9e37c3eb8d2931dbe421083736b6098" title="souffle::createAndLoad" alt="" coords="1033,523,1189,549"/><area shape="rect" id="node26" href="classsouffle_1_1_ast_translation_unit.html#a7a1598acb91192e90026763b3b968653" title="get analysis: analysis is generated on the fly if not present " alt="" coords="775,625,953,666"/><area shape="rect" id="node27" href="classsouffle_1_1_ast_clause.html#a9918f4fb19dd6f152d784512853b447a" title="Obtains a copy of the internally maintained body literals. " alt="" coords="1524,937,1655,978"/><area shape="rect" id="node28" href="classsouffle_1_1_ast_clause.html#a46a432b3284cd500a57eb181c31a3ccd" title="Gets the clause number. " alt="" coords="799,690,929,731"/><area shape="rect" id="node29" href="classsouffle_1_1_ast_clause.html#ae9a1e5dd0a7c9781e23a7d9ececd6ae5" title="Return the atom that represents the head of the clause. " alt="" coords="1524,1067,1655,1109"/><area shape="rect" id="node30" href="classsouffle_1_1_ast_atom.html#adfaa949dc3e89fa2dc25981963ea5752" title="Return the name of this atom. " alt="" coords="1741,1003,1923,1029"/><area shape="rect" id="node31" href="classsouffle_1_1_ast_program.html#a60fcb7d3a21a06be7b48f5849917a22b" title="Get all relations in the program. " alt="" coords="795,755,933,797"/><area shape="rect" id="node32" href="classsouffle_1_1_ast_translator.html#ac004a28e861d6d96bba1027d44dda8c8" title="generate RAM code for subroutine to get subproofs " alt="" coords="1023,1173,1199,1214"/><area shape="rect" id="node38" href="namespacesouffle.html#a9976cdaf1f15164ab4f40e8337e23fa2" title="souffle::printSizeStore" alt="" coords="1035,581,1186,608"/><area shape="rect" id="node40" href="classsouffle_1_1_ast_translator.html#ad523f47b3433c53e7e80014a7164e14f" title="Generates RAM code for the non&#45;recursive clauses of the given relation. " alt="" coords="1005,1107,1216,1149"/><area shape="rect" id="node45" href="classsouffle_1_1_ast_translator.html#acf09283a49379f14ab00fb06276bec19" title="generate RAM code for recursive relations in a strongly&#45;connected component " alt="" coords="771,1378,957,1419"/><area shape="rect" id="node19" href="classsouffle_1_1_ram_sequence.html#a0b409325b6311a7e7a19b1d84dae990f" title="Add new statement to the end of ordered list. " alt="" coords="1497,771,1681,797"/><area shape="rect" id="node21" href="classsouffle_1_1_ast_relation.html#a6ab4f4409da3c84af64b4a08d26ccd21" title="souffle::AstRelation\l::addIODirectives" alt="" coords="1283,391,1421,433"/><area shape="rect" id="node22" href="classsouffle_1_1_ast_relation.html#a855b01ad5e4a0871ef6c6f6bb1e95d13" title="Return the arity of this relation. " alt="" coords="1283,705,1421,746"/><area shape="rect" id="node23" href="classsouffle_1_1_ast_relation.html#a6ae505289ecfc8e40c9f4e47689f5ee8" title="Return the name of the relation. " alt="" coords="1283,522,1421,563"/><area shape="rect" id="node24" href="classsouffle_1_1_ast_relation.html#aa333dd84cbf78b723d3532baf2aaaaea" title="Check whether relation is an input relation. " alt="" coords="1283,326,1421,367"/><area shape="rect" id="node25" href="classsouffle_1_1_ast_relation.html#ae8a38221aa94f0df83f602fd1d1d0eb8" title="Check whether relation is an output relation. " alt="" coords="1283,457,1421,498"/><area shape="rect" id="node33" href="classsouffle_1_1_ast_clause.html#aef9cb574a067db73c83fd9c9f63d297f" title="Creates a clone if this AST sub&#45;structure. " alt="" coords="1524,1525,1655,1566"/><area shape="rect" id="node35" href="classsouffle_1_1_ast_atom.html#a11c5d1489f18c4981e9f4956fa2155de" title="Return the i&#45;th argument of the atom. " alt="" coords="1488,1016,1691,1043"/><area shape="rect" id="node36" href="classsouffle_1_1_ast_translator.html#ac2428fdd19059a4487d115d942d19f89" title="generate RAM code for a clause " alt="" coords="1279,1126,1425,1167"/><area shape="rect" id="node34" href="classsouffle_1_1_ast_node.html#a2ad833e42f55e6c61bdd12d6c5c2d482" title="Return source location of the AstNode. " alt="" coords="1739,1619,1925,1645"/><area shape="rect" id="node37" href="namespacesouffle.html#ab18cbb3adc2ab328de0db30a3fddf7e0" title="Returns the relation referenced by the given atom. " alt="" coords="1506,1133,1673,1160"/><area shape="rect" id="node39" href="classsouffle_1_1_ast_relation.html#a5de0a60f392fd55905d648894f62f4ab" title="Check whether relation is an input relation. " alt="" coords="1283,639,1421,681"/><area shape="rect" id="node41" href="classsouffle_1_1_ast_relation.html#a0a748962a9a2151a2fabe585346fb0d7" title="Obtains a list of the associated clauses. " alt="" coords="1521,1185,1658,1226"/><area shape="rect" id="node42" href="classsouffle_1_1_recursive_clauses.html#a5d24ac527dc23bfc572637b5547161ad" title="souffle::RecursiveClauses\l::recursive" alt="" coords="1264,1345,1440,1386"/><area shape="rect" id="node43" href="namespacesouffle.html#a06f428910159c119c1dcdcab76ab7dfa" title="Stringify a string using escapes for newline, tab, double&#45;quotes and semicolons. " alt="" coords="1295,1411,1409,1437"/><area shape="rect" id="node44" href="namespacesouffle.html#aecc08c83ad9634fc515b7aa094702949" title="A generic function converting strings into strings (trivial case). " alt="" coords="1295,1293,1409,1320"/><area shape="rect" id="node46" href="classsouffle_1_1_ast_atom.html#a274d22e3c57da222d244c26f5937dd8a" title="Creates a clone if this AST sub&#45;structure. " alt="" coords="1510,1704,1669,1731"/><area shape="rect" id="node48" href="namespacesouffle.html#ae3213abfc9e18e34bb08056ec91f7b86" title="A utility function visiting all nodes within the ast rooted by the given node recursively in a depth&#45;..." alt="" coords="1033,1867,1188,1909"/></map>
</div>
</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_ast_tuner_8h_source.html">AstTuner.h</a></li>
<li><a class="el" href="_ast_tuner_8cpp_source.html">AstTuner.cpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 14 2018 11:37:59 for souffle by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
